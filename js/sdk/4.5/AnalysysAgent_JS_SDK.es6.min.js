var fieldTemplate={base:{outer:["appid","xwho","xwhat","xwhen","xcontext"],xcontext:["$lib","$lib_version","$platform","$debug","$is_login"]},$startup:{xcontext:["$screen_width","$screen_height","$web_crawler","$time_zone","$language","$session_id","$is_first_time","$is_first_day","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$is_time_calibrated"]},$track:{xcontext:["$screen_width","$screen_height","$web_crawler","$time_zone","$language","$is_first_day","$session_id","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$is_time_calibrated"]},$pageview:{xcontext:["$screen_width","$screen_height","$web_crawler","$time_zone","$language","$session_id","$is_first_day","$referrer","$referrer_domain","$title","$url","$startup_time","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$is_time_calibrated"]},$alias:{xcontext:["$original_id"]},$getPresetProperties:{xcontext:["$screen_width","$screen_height","$time_zone","$session_id","$language"]}},baseConfig={base:{appid:"",$debug:0,uploadURL:"",auto:!0,autoProfile:!0,hash:!0,autoWebstay:!0,singlePage:!0,pageProperty:{},$lib_version:"4.5.0",cross_subdomain:!0,cross_subdomain_super:!0,allowTimeCheck:!1,isHybrid:!1,getDataTimeout:1e4,sendDataTimeout:1e4,isMessageSDK:!1},status:{code:200,FnName:"",key:"",value:"",errorCode:"",successCode:""},keywords:fieldTemplate.base.xcontext,baseJson:fieldTemplate.base.outer,sendNum:1800},_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _utf8Encode(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}function _utf8Decode(e){for(var t="",i=0,r=0,a=0,n=0;i<e.length;)(r=e.charCodeAt(i))<128?(t+=String.fromCharCode(r),i++):r>191&&r<224?(a=e.charCodeAt(i+1),t+=String.fromCharCode((31&r)<<6|63&a),i+=2):(a=e.charCodeAt(i+1),n=e.charCodeAt(i+2),t+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&n),i+=3);return t}function Util(){}function CheckChinese(e){return!!new RegExp("[\\u4E00-\\u9FFF]+","g").test(e)}Util.prototype.paramType=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},Util.prototype.objHasKay=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Util.prototype.ArrayToObj=function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]="";return t},Util.prototype.keyValueToObje=function(e,t){var i={};return i[e]=t,i},Util.prototype.toDeep=function(e){var t=null;if("Array"===this.paramType(e)){t=[];for(var i=0;i<e.length;i++)t.push(this.toDeep(e[i]))}else if("Object"===this.paramType(e))for(var r in t={},e)t[r]=this.toDeep(e[r]);else t=e;return t},Util.prototype.toDeepObj=function(e,t){var i={};if("String"===this.paramType(e))return i=this.keyValueToObje(e,t);if("Array"===this.paramType(e))return i=this.ArrayToObj(e);if("Object"===this.paramType(e))for(var r in e)i[r]=this.toDeepObj(e[r]);return i},Util.prototype.toDeep=function(e){var t=null;if("Array"===this.paramType(e)){t=[];for(var i=0;i<e.length;i++)t.push(this.toDeep(e[i]))}else if("Object"===this.paramType(e))for(var r in t={},e)t[r]=this.toDeep(e[r]);else t=e;return t},Util.prototype.toObj=function(e,t){var i={};return"String"===this.paramType(e)?i=this.keyValueToObje(e,t):"Array"===this.paramType(e)?i=this.ArrayToObj(e):"Object"===this.paramType(e)?e:i},Util.prototype.objMerge=function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var i={};for(var r in e)i[r]=e[r];for(var a in t){var n=t[a],o=i[a],s=this.paramType(n),l=this.paramType(o);i[a]=o&&"Object"===l&&"Object"===s?this.objMerge(o,n):"Array"===l&&"Array"===s?this.arrayMergeUnique(o,n):"Function"===s&&"Function"===l?this.compose(o,n):n}return i},Util.prototype.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,r=e[t].apply(this,arguments);i--;)r=e[i].call(this,r);return r}},Util.prototype.fnMerge=function(e,t){return this.objMerge(e,t)},Util.prototype.arrayUnique=function(e){for(var t=[],i={},r=0;r<e.length;r++)i[e[r]]||(i[e[r]]=!0,t.push(e[r]));return t},Util.prototype.arrayMerge=function(e,t){for(var i=[],r=0;r<e.length;r++){var a=e[r];"Object"===this.paramType(e[r])&&(a=this.toDeep(e[r])),i.push(a)}for(var n=0;n<t.length;n++){var o=e[n];"Object"===this.paramType(t[n])&&(o=this.toDeep(t[n])),i.push(o)}return i},Util.prototype.arrayMergeUnique=function(e,t){return e.push.apply(e,t),this.arrayUnique(e)},Util.prototype.encode=function(e){var t,i,r,a,n,o,s,l="",c=0;for(e=_utf8Encode(e);c<e.length;)a=(t=e.charCodeAt(c++))>>2,n=(3&t)<<4|(i=e.charCodeAt(c++))>>4,o=(15&i)<<2|(r=e.charCodeAt(c++))>>6,s=63&r,isNaN(i)?o=s=64:isNaN(r)&&(s=64),l=l+_keyStr.charAt(a)+_keyStr.charAt(n)+_keyStr.charAt(o)+_keyStr.charAt(s);return l},Util.prototype.decode=function(e){var t,i,r,a,n,o,s="",l=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");l<e.length;)t=_keyStr.indexOf(e.charAt(l++))<<2|(a=_keyStr.indexOf(e.charAt(l++)))>>4,i=(15&a)<<4|(n=_keyStr.indexOf(e.charAt(l++)))>>2,r=(3&n)<<6|(o=_keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!==n&&(s+=String.fromCharCode(i)),64!==o&&(s+=String.fromCharCode(r));return s=_utf8Decode(s)},Util.prototype.isEmptyObject=function(e){for(var t in e)return!1;return!0},Util.prototype.format=function(e,t){var i=e.getTimezoneOffset(),r={"M+":(e=new Date(e.getTime()+60*i*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,3===RegExp.$1.length?(""+r[a]).length<3?("00"+r[a]).substr(("00"+r[a]).length-3,("00"+r[a]).length):r[a]:("00"+r[a]).substr((""+r[a]).length)));return t},Util.prototype.MD5=function(e,t){function i(e,t){return e<<t|e>>>32-t}function r(e,t){var i,r,a,n,o;return a=2147483648&e,n=2147483648&t,o=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(r=1073741824&t)?2147483648^o^a^n:i|r?1073741824&o?3221225472^o^a^n:1073741824^o^a^n:o^a^n}function a(e,t,a,n,o,s,l){return e=r(e,r(r(function(e,t,i){return e&t|~e&i}(t,a,n),o),l)),r(i(e,s),t)}function n(e,t,a,n,o,s,l){return e=r(e,r(r(function(e,t,i){return e&i|t&~i}(t,a,n),o),l)),r(i(e,s),t)}function o(e,t,a,n,o,s,l){return e=r(e,r(r(function(e,t,i){return e^t^i}(t,a,n),o),l)),r(i(e,s),t)}function s(e,t,a,n,o,s,l){return e=r(e,r(r(function(e,t,i){return t^(e|~i)}(t,a,n),o),l)),r(i(e,s),t)}function l(e){var t,i="",r="";for(t=0;t<=3;t++)i+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return i}var c,u,p,g,d,f,m,y,h,v;for(c=function(e){for(var t,i=e.length,r=i+8,a=16*((r-r%64)/64+1),n=Array(a-1),o=0,s=0;s<i;)o=s%4*8,n[t=(s-s%4)/4]=n[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,n[t=(s-s%4)/4]=n[t]|128<<o,n[a-2]=i<<3,n[a-1]=i>>>29,n}(e),m=1732584193,y=4023233417,h=2562383102,v=271733878,u=0;u<c.length;u+=16)p=m,g=y,d=h,f=v,m=a(m,y,h,v,c[u+0],7,3614090360),v=a(v,m,y,h,c[u+1],12,3905402710),h=a(h,v,m,y,c[u+2],17,606105819),y=a(y,h,v,m,c[u+3],22,3250441966),m=a(m,y,h,v,c[u+4],7,4118548399),v=a(v,m,y,h,c[u+5],12,1200080426),h=a(h,v,m,y,c[u+6],17,2821735955),y=a(y,h,v,m,c[u+7],22,4249261313),m=a(m,y,h,v,c[u+8],7,1770035416),v=a(v,m,y,h,c[u+9],12,2336552879),h=a(h,v,m,y,c[u+10],17,4294925233),y=a(y,h,v,m,c[u+11],22,2304563134),m=a(m,y,h,v,c[u+12],7,1804603682),v=a(v,m,y,h,c[u+13],12,4254626195),h=a(h,v,m,y,c[u+14],17,2792965006),m=n(m,y=a(y,h,v,m,c[u+15],22,1236535329),h,v,c[u+1],5,4129170786),v=n(v,m,y,h,c[u+6],9,3225465664),h=n(h,v,m,y,c[u+11],14,643717713),y=n(y,h,v,m,c[u+0],20,3921069994),m=n(m,y,h,v,c[u+5],5,3593408605),v=n(v,m,y,h,c[u+10],9,38016083),h=n(h,v,m,y,c[u+15],14,3634488961),y=n(y,h,v,m,c[u+4],20,3889429448),m=n(m,y,h,v,c[u+9],5,568446438),v=n(v,m,y,h,c[u+14],9,3275163606),h=n(h,v,m,y,c[u+3],14,4107603335),y=n(y,h,v,m,c[u+8],20,1163531501),m=n(m,y,h,v,c[u+13],5,2850285829),v=n(v,m,y,h,c[u+2],9,4243563512),h=n(h,v,m,y,c[u+7],14,1735328473),m=o(m,y=n(y,h,v,m,c[u+12],20,2368359562),h,v,c[u+5],4,4294588738),v=o(v,m,y,h,c[u+8],11,2272392833),h=o(h,v,m,y,c[u+11],16,1839030562),y=o(y,h,v,m,c[u+14],23,4259657740),m=o(m,y,h,v,c[u+1],4,2763975236),v=o(v,m,y,h,c[u+4],11,1272893353),h=o(h,v,m,y,c[u+7],16,4139469664),y=o(y,h,v,m,c[u+10],23,3200236656),m=o(m,y,h,v,c[u+13],4,681279174),v=o(v,m,y,h,c[u+0],11,3936430074),h=o(h,v,m,y,c[u+3],16,3572445317),y=o(y,h,v,m,c[u+6],23,76029189),m=o(m,y,h,v,c[u+9],4,3654602809),v=o(v,m,y,h,c[u+12],11,3873151461),h=o(h,v,m,y,c[u+15],16,530742520),m=s(m,y=o(y,h,v,m,c[u+2],23,3299628645),h,v,c[u+0],6,4096336452),v=s(v,m,y,h,c[u+7],10,1126891415),h=s(h,v,m,y,c[u+14],15,2878612391),y=s(y,h,v,m,c[u+5],21,4237533241),m=s(m,y,h,v,c[u+12],6,1700485571),v=s(v,m,y,h,c[u+3],10,2399980690),h=s(h,v,m,y,c[u+10],15,4293915773),y=s(y,h,v,m,c[u+1],21,2240044497),m=s(m,y,h,v,c[u+8],6,1873313359),v=s(v,m,y,h,c[u+15],10,4264355552),h=s(h,v,m,y,c[u+6],15,2734768916),y=s(y,h,v,m,c[u+13],21,1309151649),m=s(m,y,h,v,c[u+4],6,4149444226),v=s(v,m,y,h,c[u+11],10,3174756917),h=s(h,v,m,y,c[u+2],15,718787259),y=s(y,h,v,m,c[u+9],21,3951481745),m=r(m,p),y=r(y,g),h=r(h,d),v=r(v,f);return 32===t?l(m)+l(y)+l(h)+l(v):l(y)+l(h)},Util.prototype.clientTimeZone=function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),i=e%60,r="-";return(t<=0||i<0)&&(r="+",t=-t,i<0&&(i=-i)),1===(t+="").length&&(t="0"+t),1===(i+="").length&&(i="0"+i),r+t+":"+i},Util.prototype.delEmpty=function(e){var t={};for(var i in e){var r=!0,a=this.paramType(e[i]);"Object"!==a?(e[i]||"Number"===a&&!isNaN(e[i])||"Boolean"===a||(r=!1),!0===r&&(t[i]=e[i])):t[i]=this.delEmpty(e[i])}for(var n in t){var o=[];for(var s in t[n])o.push(t[n][s]);0===o.length&&t[n].constructor===Object&&delete t[n]}return t},Util.prototype.addEvent=function(e,t,i,r){if(document.addEventListener)if("Array"!==this.paramType(e)&&"HTMLCollection"!==this.paramType(e)||!e.length||e===window)e.addEventListener(t,i,r);else for(var a=0;a<e.length;a++)this.addEvent(e[a],t,i,r);else if(e.length&&e!==window)for(var n=0;n<e.length;n++)this.addEvent(e[n],t,i);else e.attachEvent("on"+t,(function(){return i.call(e,window.event)}))},Util.prototype.removeEvent=function(e,t,i,r){if(document.removeEventListener)if(e.length)for(var a=0;a<e.length;a++)this.removeEvent(e[a],t,i,r);else e.removeEventListener(t,i,r);else if(e.length)for(var n=0;n<e.length;n++)this.removeEvent(e[n],t,i);else e.detachEvent("on"+t,(function(){return i.call(e,window.event)}))},Util.prototype.addEleLable=function(e,t,i,r){var a=document,n=a.createElement(e),o=r||a.body||a.getElementsByTagName("body")[0];return i&&(n.id=i),t&&(n.className=t),o.appendChild(n),n},Util.prototype.addScript=function(e,t,i){var r=document,a=r.createElement("script"),n=r.getElementsByTagName("script");a.type="text/javascript",a.async=!0,a.id=e;var o="";if(t){if("Array"===this.paramType(t))return void(0,t[0])([t[1]],i);o="/"===t.charAt(t.length-1)?t:t+"/"}else if(r.getElementById("ARK_SDK"))o=r.getElementById("ARK_SDK").src;else for(var s=0;s<n.length;s++)if(n[s].src&&n[s].src.indexOf("AnalysysAgent_JS_SDK")>-1){o=n[s].src;break}var l=o.substring(0,o.lastIndexOf("/")+1);a.src=l+e+".min.js?v="+this.format(new Date,"yyyyMMddhhmm"),a.onload=setTimeout(i,500),n[0].parentNode.insertBefore(a,n[0])},Util.prototype.GetUrlParam=function(e){var t=document.location.toString(),i=window.name;"String"===this.paramType(i)&&i.indexOf(e)>-1&&(t=i);var r=t.split("?");if(r.length>1){for(var a,n=[],o=1;o<r.length;o++)n.push.apply(n,r[o].split("&"));for(var s=0;s<n.length;s++)if(null!=(a=n[s].split("="))&&a[0]===e){var l=a[1];if(a[1].indexOf("#")>-1&&(l=l.split("#")[0]),l.indexOf("%")>-1){try{var c=decodeURI(l);if(CheckChinese(c))return c}catch(e){}if("Object"===this.paramType(window.AnalysysModule)&&"Function"===this.paramType(window.AnalysysModule.decodeGBK))try{return window.AnalysysModule.decodeGBK(l,"gbk")}catch(e){}}return l}return""}return""},Util.prototype.stringSlice=function(e,t){return e.slice(0,t)},Util.prototype.trim=function(e){return"String"===this.paramType(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},Util.prototype.changeHash=function(e){var t=window.history.pushState,i=window.history.replaceState;window.history.pushState=function(){t.apply(window.history,arguments),e.apply(e)},window.history.replaceState=function(){i.apply(window.history,arguments),e.apply(e)};var r;"on"+(r=window.ActiveXObject||"ActiveXObject"in window?"hashchange":"popstate")in window&&this.addEvent(window,r,(function(){setTimeout(e,0)}))},Util.prototype.deviceType=function(){var e=navigator.userAgent;return e.indexOf("Tablet")>-1&&e.indexOf("PC")<0||e.indexOf("Pad")>-1||e.indexOf("Nexus 7")>-1?"tablet":e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1?"phone":"desktop"},Util.prototype.checkTypeList=function(e,t){var i=this.paramType(e);if("String"===i){var r=window.location.href,a=window.location.protocol+"//"+window.location.host,n=a+window.location.pathname;if([r,a,n+"index.html",n,n+window.location.hash].indexOf(e)>-1)return!0}else{if("Function"===i)return e.call(e,t);if("Array"===i)for(var o=0;o<e.length;o++)if(!0===this.checkTypeList(e[o],t))return!0}return!1},Util.prototype.selectorAllEleList=function(e){var t=[],i=e.split(".")[0];if("Function"===this.paramType(document.querySelectorAll)&&e.indexOf("|")<0)try{return document.querySelectorAll(e)}catch(e){}var r="";if(e.indexOf("#")>-1){r=e.split(".")[0].split("#")[1];var a=document.getElementById(r);a&&t.push(a)}else{if(e.indexOf(".")<0)return document.getElementsByTagName(i);if(e.indexOf("[")>-1&&e.indexOf("]")>-1)for(var n=document.getElementsByTagName("*"),o=e.replace("[","").replace("]",""),s=0;s<n.length;s++){var l=n[s].getAttribute(o);"String"===this.paramType(l)&&t.push(a)}else for(var c=document.getElementsByTagName(i),u=0;u<c.length;u++){var p=c[u],g="String"===this.paramType(p.className)?p.className.split(" "):[];g.length>0&&(i+"."+g.join(".")).indexOf(e)>-1&&t.push(p)}}return t},Util.prototype.getDomainFromUrl=function(e,t){if(""===t)return"";var i=(t=t||window.location.hostname).split("/");i.length>2&&(t=i[2]);if(!0===/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t)||"localhost"===t)return"";var r=t.split("."),a=!0===e?2:r.length;("Number"!==this.paramType(a)||a<2)&&(a=2);var n=[];if(!(r.length>1))return"";r.length<a&&(a=r.length);for(var o=r.length-1;o>=0&&n.length!==a;o--)n.push(r[o]);return n.reverse().join(".")},Util.prototype.isiOS=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),Util.prototype.delNotHybrid=function(e){return delete e.$is_first_day,delete e.$session_id,delete e.$is_time_calibrated,delete e.$startup_time,e},Util.prototype.getUrlPath=function(){var e=window.location.hash;return e.indexOf("?")>-1&&(e=e.split("?")[0]),window.location.host+window.location.pathname+e},Util.prototype.detectZoom=function(){for(var e=this.selectorAllEleList("meta"),t=1,i=0;i<e.length;i++){var r=e[i].getAttribute("content");if(r&&r.indexOf("initial-scale=")>-1)for(var a=r.split(","),n=0;n<a.length;n++)a[n].indexOf("initial-scale")>-1&&(t=parseFloat(a[n].split("=")[1]))}return t};var Util$1=new Util,Local="",Session="";try{Local="object"==typeof window.localStorage?window.localStorage:"",Session="object"==typeof window.sessionStorage?window.sessionStorage:""}catch(e){}function Storage(){this.localName="FZ_STROAGE",this.sessionName="FZ_SESSION",this.cookieName="FZ_STROAGE."+Util$1.getDomainFromUrl(baseConfig.base.cross_subdomain),this.checkSubdomain(),this.localObj=this.getLocal(),this.sessionObj=this.getSession()}Storage.prototype.checkSubdomain=function(){var e=window.AnalysysAgent||[];if("Array"===Util$1.paramType(e))for(var t=0;t<e.length;t++)"cross_subdomain"===e[t][0]&&"Boolean"===Util$1.paramType(e[t][1])&&(baseConfig.base.cross_subdomain=e[t][1]);if(e&&Util$1.objHasKay(e.config||{},"cross_subdomain")&&(baseConfig.base.cross_subdomain=e.config.cross_subdomain),!0===baseConfig.base.cross_subdomain){var i=this.getCookie(this.cookieName)||Util$1.encode("{}");if(i=JSON.parse(Util$1.decode(decodeURIComponent(i))),"Object"===Util$1.paramType(i)&&!Util$1.isEmptyObject(i)){var r=i.ARK_ID,a={};!0===Util$1.objHasKay(i,"ARKSUPER")&&(a=i.ARKSUPER,delete i.ARKSUPER);var n=Util$1.objMerge(this.localObj||{},i);!0!==baseConfig.base.cross_subdomain_super||Util$1.isEmptyObject(a)||(n=Util$1.objMerge({ARKSUPER:a},n)),this.setLocal(this.localName,n),this.setCookie("ARK_ID",r)}}},Storage.prototype.setLocal=function(e,t){this.localObj=this.getLocal(),e===this.localName?this.localObj=t:this.localObj[e]=t;try{if(Local?(Local.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj))),Session.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj)))):"POSTDATA"!==e&&this.setCookie(this.cookieName,encodeURIComponent(Util$1.encode(JSON.stringify(this.localObj)))),"POSTDATA"!==e&&!0===baseConfig.base.cross_subdomain){var i=Util$1.toDeep(this.localObj);delete i.POSTDATA,this.setCookie(this.cookieName,encodeURIComponent(Util$1.encode(JSON.stringify(i))))}}catch(e){}},Storage.prototype.getLocal=function(e){try{var t=Util$1.encode("{}");if(Local){if(!(t=Local.getItem(this.localName)))Session.getItem(this.localName)&&(t=Session.getItem(this.localName),Local.setItem(this.localName,t))}else t=(t=this.getCookie(this.cookieName))?decodeURIComponent(t):Util$1.encode(JSON.stringify(this.localObj));return this.localObj=JSON.parse(Util$1.decode(t)),e?this.localObj[e]:this.localObj}catch(t){return e?"":{}}},Storage.prototype.removeLocal=function(e){if(this.localObj=this.getLocal(),Util$1.objHasKay(this.localObj,e)&&delete this.localObj[e],Util$1.isEmptyObject(this.localObj))try{Local&&(Local.removeItem(this.localName),Session.removeItem(this.localName)),this.removeCookie(this.cookieName)}catch(e){}else if(Local&&(Local.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj))),Session.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj)))),"POSTDATA"!==e&&"ARK_ID"!==e&&!0===baseConfig.base.cross_subdomain){var t=Util$1.toDeep(this.localObj);delete t.POSTDATA,delete t.ARK_ID,this.setCookie(this.cookieName,Util$1.encode(JSON.stringify(t)))}},Storage.prototype.setSession=function(e,t){this.sessionObj=this.getSession(),this.sessionObj[e]=t;try{Session?(Session.setItem(this.sessionName,Util$1.encode(JSON.stringify(this.sessionObj))),this.removeCookie(this.sessionName)):"POSTDATA"!==e&&this.setCookie(this.sessionName,Util$1.encode(JSON.stringify(this.sessionObj)),"session")}catch(e){}},Storage.prototype.getSession=function(e){try{var t=Util$1.encode("{}");return Session?(t=Session.getItem(this.sessionName)||Util$1.encode("{}"),this.removeCookie(this.sessionName)):(t=this.getCookie(this.sessionName))||(t=Util$1.encode(JSON.stringify(this.sessionObj))),this.sessionObj=JSON.parse(Util$1.decode(t)),e?this.sessionObj[e]:this.sessionObj}catch(e){return{}}},Storage.prototype.removeSession=function(e){if(this.sessionObj=this.getSession(),Util$1.objHasKay(this.sessionObj,e)&&delete this.sessionObj[e],Util$1.isEmptyObject(this.sessionObj))try{Session?(Session.removeItem(this.sessionName),this.removeCookie(this.sessionName)):this.removeCookie(this.sessionName)}catch(e){}else Session&&Session.setItem(this.sessionName,Util$1.encode(JSON.stringify(this.sessionObj)))},Storage.prototype.setCookie=function(e,t,i){var r="."+Util$1.getDomainFromUrl(baseConfig.base.cross_subdomain),a=r?"; domain="+r:"",n="";if("session"!==i){var o=new Date;o.setTime(o.getTime()+31536e6),n="; expires="+o.toGMTString()}document.cookie=e+"="+t+n+"; path=/"+a},Storage.prototype.getCookie=function(e){e=e||this.localName;var t=document.cookie;if("string"!=typeof t)return"";var i,r,a=e+"=",n=t.split(/[;&]/);for(i=0;i<n.length;i++){for(r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(a))return r.substring(a.length,r.length)||""}},Storage.prototype.removeCookie=function(e,t,i){t="Boolean"===Util$1.paramType(t)?t:baseConfig.base.cross_subdomain;var r="."+Util$1.getDomainFromUrl(t),a=r?"; domain="+r:"";if("session"!==i){var n=new Date;n.setTime(n.getTime()-94608e6);var o="; expires="+n.toGMTString()}document.cookie=e+"="+o+"; path=/"+a};var Storage$1=new Storage,UTM={utm_campaign_id:Util$1.GetUrlParam("campaign_id"),utm_source:Util$1.GetUrlParam("utm_source")||Util$1.GetUrlParam("hmsr"),utm_medium:Util$1.GetUrlParam("utm_medium")||Util$1.GetUrlParam("hmpl"),utm_term:Util$1.GetUrlParam("utm_term")||Util$1.GetUrlParam("hmkw"),utm_content:Util$1.GetUrlParam("utm_content")||Util$1.GetUrlParam("hmci"),utm_campaign:Util$1.GetUrlParam("utm_campaign")||Util$1.GetUrlParam("hmcu")};function clearUTM(){UTM={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""}}function SessionId(){this.sessionId=Storage$1.getLocal("SEESIONID")||this.setId(),this.sessionDate=Storage$1.getLocal("SEESIONDATE")||0}SessionId.prototype.setId=function(){var e=+new Date;return this.sessionId=Util$1.MD5("JS"+e.toString()+1e7*Math.random()),this.sessionDate=e,Storage$1.setLocal("SEESIONID",this.sessionId),Storage$1.setLocal("SEESIONDATE",this.sessionDate),this.sessionId},SessionId.prototype.getId=function(){var e=new Date,t=e.getTime(),i=e.getTimezoneOffset(),r=new Date(t+60*i*1e3+288e5).getDate();this.sessionDate=Storage$1.getLocal("SEESIONDATE")||0;var a=0===this.sessionDate?0:new Date(this.sessionDate+60*i*1e3+288e5).getDate();return(!this.sessionId||!this.sessionDate||Number(t)-Number(this.sessionDate)>18e5||r!==a)&&(clearUTM(),this.setId()),this.sessionDate=t,Storage$1.setLocal("SEESIONDATE",t),this.sessionId=Storage$1.getLocal("SEESIONID")||this.setId(),this.sessionId};var sessionId=new SessionId,UA=navigator.userAgent.toLowerCase();function checkSpider(){return!!UA.match(/(bot|crawler|spider|scrapy|dnspod|ia_archiver|jiankongbao|slurp|transcoder|networkbench|oneapm|PhantomJS|BingPreview)/i)}function getId(){var e=Storage$1.getLocal("ARK_LOGINID")||Storage$1.getLocal("ARK_TRACKID")||Storage$1.getLocal("ARK_ID");return e&&"[object Object]"!==e||(e=setUUId(),Storage$1.setLocal("ARK_ID",e)),Storage$1.setCookie("ARK_ID",getIdentifyId()||getUUId()),e}function setUUId(){var e=(new Date).getTime().toString()+(1e4*Math.random()).toString(),t="JS"+Util$1.MD5(e.toString(),32)+Util$1.MD5(e.toString(),32).slice(0,4);return Storage$1.setCookie("ARK_ID",t),t}function getUUId(){var e=Storage$1.getLocal("ARK_ID");return e||(e=setUUId(),Storage$1.setLocal("ARK_ID",e)),e}function removeUUId(){Storage$1.removeLocal("ARK_ID")}function getAliasId(){return Storage$1.getLocal("ARK_LOGINID")}function removeAliasId(){Storage$1.removeLocal("ARK_LOGINID")}function getIdentifyId(){return Storage$1.getLocal("ARK_TRACKID")}function removeIdentifyId(){Storage$1.removeLocal("ARK_TRACK_LOGIN"),Storage$1.removeLocal("ARK_TRACKID")}var base=baseConfig.base;function appkey(e){base.appid=e}function getAppId(){return base.appid}function debugMode(e){base.$debug=e}function getDebugMode(){return base.$debug}function uploadURL(e){"/"!==e.charAt(e.length-1)&&(e+="/"),base.uploadURL=e}function getUploadURL(){return"/"!==base.uploadURL.charAt(base.uploadURL.length-1)&&(base.uploadURL+="/"),base.uploadURL}function nowDate(){return+new Date+(Storage$1.getLocal("ANSSERVERTIME")?Number(Storage$1.getLocal("ANSSERVERTIME")):0)}function timeCalibration(){return!!Storage$1.getLocal("ANSSERVERTIME")}function getXwhat(){return baseConfig.status.FnName}function isLogin(){var e=!1;return(getAliasId()||Storage$1.getLocal("ARK_TRACK_LOGIN"))&&(e=!0),e}var timeZone="GMT"+Util$1.clientTimeZone(),language=(navigator.language||navigator.browserLanguage).toLowerCase();function getSessionId(){return sessionId.getId()}function isFirstTime(){var e=Storage$1.getLocal("FRISTIME");return Storage$1.setLocal("FRISTIME",!1),e}function isFirstDay(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;var r=e.getDate(),a=t+""+i+(r=r<10?"0"+r:r),n=Storage$1.getLocal("FRISTDAY");return!n||a===n}function originalId(){return getIdentifyId()||getUUId()}var referrer=document.referrer||"";function setReferrer(e){referrer=e}function getReferrer(){var e=referrer;try{e=decodeURIComponent(referrer)}catch(e){}return!0===baseConfig.base.isHybrid&&(e=encodeURIComponent(e)),e}function getReferrerDomain(){return Util$1.getDomainFromUrl(!1,referrer)}function getTitle(){return document.title}function startupTime(){return Storage$1.getSession("STARTUPTIME")||""}function getUrl(){var e=window.location.href;try{e=decodeURIComponent(e)}catch(e){}return!0===baseConfig.base.isHybrid&&(e=encodeURIComponent(e)),e}function getLibVersion(){return base.$lib_version}function getScreenWidth(){return"Number"===Util$1.paramType(Number(window.screen.width))?Number(window.screen.width):0}function getScreenHeight(){return"Number"===Util$1.paramType(Number(window.screen.height))?Number(window.screen.height):0}var oldUTM=Storage$1.getSession("ARK_UTM")||"";function utmCampaignId(){return UTM.utm_campaign_id}function utmSource(){return UTM.utm_source}function utmMedium(){return UTM.utm_medium}function utmTerm(){return UTM.utm_term}function utmContent(){return UTM.utm_content}function utmCampaign(){return UTM.utm_campaign}UTM.utm_campaign||UTM.utm_source||UTM.utm_medium||UTM.utm_campaign_id||UTM.utm_term||UTM.utm_content?(oldUTM!==JSON.stringify(UTM)&&sessionId.setId(),Storage$1.setSession("ARK_UTM",JSON.stringify(UTM))):(clearUTM(),Storage$1.removeSession("ARK_UTM"));var getField=Object.freeze({__proto__:null,getAppId:getAppId,getId:getId,getUploadURL:getUploadURL,appkey:appkey,debugMode:debugMode,uploadURL:uploadURL,getDebugMode:getDebugMode,nowDate:nowDate,getXwhat:getXwhat,isLogin:isLogin,timeZone:timeZone,language:language,getSessionId:getSessionId,isFirstTime:isFirstTime,isFirstDay:isFirstDay,originalId:originalId,getReferrer:getReferrer,getReferrerDomain:getReferrerDomain,getTitle:getTitle,getUrl:getUrl,getScreenWidth:getScreenWidth,getScreenHeight:getScreenHeight,startupTime:startupTime,checkSpider:checkSpider,getLibVersion:getLibVersion,utmCampaignId:utmCampaignId,utmSource:utmSource,utmMedium:utmMedium,utmTerm:utmTerm,utmContent:utmContent,utmCampaign:utmCampaign,timeCalibration:timeCalibration,setReferrer:setReferrer}),fieldRules={resetKeywords:["appid","$debug","uploadUrl"],uploadURL:{valueType:0,value:getUploadURL,check:{value:["isString","nimLength","isUrl"],errorCode:"60007",successCode:"20008"}},appid:{valueType:0,value:getAppId,check:{value:["isString","nimLength"],errorCode:"60006",successCode:"20006"}},hash:{check:{value:["isBoolean"],errorCode:"60003"}},auto:{check:{value:["isBoolean"],errorCode:"60003"}},autoProfile:{check:{value:["isBoolean"],errorCode:"60003"}},pageProperty:{check:{value:["isObject"],errorCode:"600016"}},xwho:{valueType:0,value:getId,check:{value:["isString","nimLength"]}},xwhen:{valueType:0,value:nowDate},xwhat:{valueType:0,value:getXwhat,check:{value:["isString","nimLength"]}},xcontext:{$lib:{valueType:1,value:"JS"},$lib_version:{valueType:0,value:getLibVersion,check:{value:["isString"],successCode:"20007"}},$platform:{valueType:1,value:"JS"},$debug:{valueType:0,value:getDebugMode,check:{value:["isNumber","isDebug"]}},$is_login:{valueType:0,value:isLogin,check:{value:["isBoolean"]}},$screen_width:{valueType:0,value:getScreenWidth,check:{value:["isNumber"]}},$screen_height:{valueType:0,value:getScreenHeight,check:{value:["isNumber"]}},$time_zone:{valueType:1,value:timeZone},$language:{valueType:1,value:language},$session_id:{valueType:0,value:getSessionId},$is_first_time:{valueType:0,value:isFirstTime},$is_first_day:{valueType:0,value:isFirstDay},$referrer:{valueType:0,value:getReferrer},$referrer_domain:{valueType:0,value:getReferrerDomain},$title:{valueType:0,value:getTitle},$url:{valueType:0,value:getUrl},$startup_time:{valueType:0,value:startupTime},$web_crawler:{valueType:0,value:checkSpider},$original_id:{valueType:0,value:originalId},$utm_campaign_id:{valueType:0,value:utmCampaignId},$utm_source:{valueType:0,value:utmSource},$utm_medium:{valueType:0,value:utmMedium},$utm_term:{valueType:0,value:utmTerm},$utm_content:{valueType:0,value:utmContent},$utm_campaign:{valueType:0,value:utmCampaign},$is_time_calibrated:{valueType:0,value:timeCalibration}},xcontextCommonRule:{check:{key:["isString","length99","notSpecialCharacters","keywords"],value:["notObject","isArrayString","length255"]}},$track:{check:{key:["isString","notSpecialCharacters","length99"]}},$alias:{check:{key:["isString","keyLength255"]}},$profile_increment:{check:{key:["isString","length99","notSpecialCharacters"],value:["isNumber"]}},$profile_unset:{check:{key:["isString","length99","notSpecialCharacters"]}},$pageview:{check:{key:["isString","keyLength255"]}}},lifecycle={},fieldRules$1={"visitorConfigURL ":{check:{value:["isUrl"]}}},fieldTemplate$1={};function getElementContent(e){var t="";if("input"!==e.tagName.toLowerCase()||"button"!==e.type&&"submit"!==e.type?"img"===e.tagName.toLowerCase()?t=e.getAttribute("alt")||e.getAttribute("title")||"":"a"===e.tagName.toLowerCase()&&(t=e.getAttribute("title")||""):t=e.value||"",!t)for(var i=e.childNodes,r=0;r<i.length;r++)3===i[r].nodeType&&(t+=i[r].nodeValue);return t=t&&"String"===Util$1.paramType(t)?t.replace(/[\r\n]/g," ").replace(/[ ]+/g," "):"","input"===e.tagName.toLowerCase()?"":t=Util$1.trim(t)}var androidModel={hashCode:"",width:0,height:0,aleft:0,atop:0,classes:[],clickable:!1,alpha:1,hidden:0,text:"",subviews:[],new_path:[],url:""},iosModel={id:"",class:[],properties:{alpha:{values:[{value:1}]},userInteractionEnabled:{values:[{value:!0}]},enabled:{values:[{value:!0}]},hidden:{values:[{value:!1}]},subviews:{values:[{value:[]}]},superview:{values:[{value:0}]},frame:{values:[{value:{AX:0,AY:0,Height:0,Width:0}}]}},new_path:[],url:"",controlEvent:"64"},id=0,rootId=0,eleList=[];function getDomList(e,t){if(1!==e.nodeType)return null;for(var i="web"+(0===id?rootId:rootId+""+id),r=e,a=[];null!==r;){var n=r.children;if(!n)break;if(n.length>0)for(var o=0;o<n.length;o++)if(id++,1===n[o].nodeType&&["canvas","svg","use"].indexOf(n[o].tagName)<0)if("TABLE"===n[o].tagName)for(var s=n[o].children,l=0;l<s.length;l++){id++;var c=getDomList(s[l],i);c&&a.push(c)}else{var u=getDomList(n[o],i);u&&a.push(u)}r=r.children}var p={};return(p=!0===Util$1.isiOS?setiOSModel(e,i,t,a):setAndroidModel(e,i,t,a)).url=Util$1.getUrlPath(),p.root_id="web"+rootId,"TABLE"!==e.tagName&&eleList.push(p),i}var detect=Util$1.detectZoom();function setiOSModel(e,t,i,r){var a=JSON.parse(JSON.stringify(iosModel)),n=eleOffset(e);a.id=t,a.properties.frame.values[0].value.Width=(e.offsetWidth||e.scrollWidth||e.clientWidth)*detect,a.properties.frame.values[0].value.Height=(e.offsetHeight||e.offsetHeight||e.clientHeight)*detect,a.properties.frame.values[0].value.AX=n.left*detect,a.properties.frame.values[0].value.AY=n.top*detect;var o=domParentList(e);a.new_path=o.newPath,a.class=e.className&&"String"===Util$1.paramType(e.className)?e.className.split(" "):[],a.eg_text=getElementContent(e),a.properties.enabled.values[0].value=!0,a.properties.subviews.values[0].value=r,a.properties.superview.values[0].value=i,a.bodyWidth=window.screen.width,a.bodyHeight=window.screen.height,a.bodyScrollTop=n.bodyScrollTop*detect,a.bodyScrollLeft=n.bodyScrollLeft*detect,a.eleScrollTop=n.eleScrollTop*detect,a.eleScrollLeft=n.eleScrollLeft*detect;var s=(""!==e.style.filter?e.style.filter.match(/opacity:[/S/s]*?\)/)[0]:e.style.opacity)||1;return a.properties.alpha.values[0].value=s,a}function setAndroidModel(e,t,i,r){var a=JSON.parse(JSON.stringify(androidModel)),n=eleOffset(e),o=domParentList(e);return a.new_path=o.newPath,a.hashCode=t,a.parentid=i,a.bodyWidth=window.screen.width,a.bodyHeight=window.screen.height,a.width=(e.offsetWidth||e.scrollWidth||e.clientWidth)*detect,a.height=(e.offsetHeight||e.scrollHeight||e.clientHeight)*detect,a.aleft=n.left*detect,a.atop=n.top*detect,a.bodyScrollTop=n.bodyScrollTop*detect,a.bodyScrollLeft=n.bodyScrollLeft*detect,a.eleScrollTop=n.eleScrollTop*detect,a.eleScrollLeft=n.eleScrollLeft*detect,a.clickable=!0,a.text=getElementContent(e),a.alpha=(""!==e.style.filter?e.style.filter.match(/opacity:[/S/s]*?\)/)[0]:e.style.opacity)||1,a.classes=e.className&&"String"===Util$1.paramType(e.className)?e.className.split(" "):[],a.subviews=r,a}function HybridVisual(e){if(eleList=[],rootId=e||+new Date,getDomList(document.body,id),id=0,!0===Util$1.isiOS)return JSON.stringify(eleList);window.AnalysysAgentHybrid.onVisualDomList(JSON.stringify(eleList))}var HybridAns={visitorEventList:[],visitorProperties:{},getVisualDomList:function(e){return HybridVisual(e)},onEventList:function(e){e=e||[],"String"===Util$1.paramType(e)&&(e=JSON.parse(e));for(var t=[],i=0;i<e.length;i++)1!==e[i].isAll&&e[i].target_page&&e[i].target_page!==Util$1.getUrlPath()||(e[i].bindings=e[i].props_binding,t.push(e[i]));HybridAns.visitorEventList=t},getProperty:function(e){"String"===Util$1.paramType(e)&&(e=JSON.parse(e));var t=getRelated(e);if(!0===Util$1.isiOS)return JSON.stringify(t);window.AnalysysAgentHybrid.onProperty(JSON.stringify(t))},onProperty:function(e,t){if("Function"===Util$1.paramType(HybridAns.visitorProperties[t])){if("String"===Util$1.paramType(e)&&(e=JSON.parse(e)),"Array"===Util$1.paramType(e)){for(var i={},r=0;r<e.length;r++)i=Util$1.objMerge(i,e[r]);e=i}return HybridAns.visitorProperties[t].call(HybridAns.visitorProperties[t],e),delete HybridAns.visitorProperties[t],!0}return!1}};function getPath(e){for(var t=e.tagName.toLowerCase(),i="",r="String"!==Util$1.paramType(e.className)?[]:e.className.split(" "),a=0;a<r.length;a++)r[a]&&r[a].indexOf("ARK")<0&&(i+="."+r[a]);return{className:i,id:e.id||"",tagName:t}}function domParentList(e){for(var t=[],i=[],r=e;null!=r;){if(1===r.nodeType){var a=getPath(r),n=getEleIndex(r);t.push(a.tagName+(a.id?"#"+a.id:"")+a.className);var o={id:a.id,tagName:a.tagName};null!==a.row?o.row=n.row:o.index=n.index,i.push(Util$1.delEmpty(o)),r=r.parentNode}else r=r.parentNode}return{path:t.join("<"),newPath:i}}function getEleIndex(e){for(var t=e.parentNode,i=0,r=!0,a=null;null!==t&&!0===r;){if(1===t.nodeType){for(var n=t.children,o=[],s=[],l=0;l<n.length;l++){var c=getPath(n[l]);o.push(c),e===n[l]&&(s=c,i=l)}for(var u=0;u<n.length;u++)!0===newPathContrast({newPath:o[u]},s)&&(a=i);r=!1}else t=t.parentNode}return{row:a,index:i}}function parentContrast(e,t){for(var i=0;i<e.length;i++)if(e[i].split(".")[0]!==t[i].split(".")[0])return!1;return!0}function newPathContrast(e,t,i){var r=e.newPath,a=Util$1.arrayMerge([],r),n=Util$1.arrayMerge([],t),o=Util$1.arrayMerge([],r);if(a===n)return!0;if(a.length<n.length)return!1;if(a.length>n.length){if(!0===i)return!1;a.splice(0,a.length-n.length),o=Util$1.arrayMerge([],a)}for(var s=!0,l=0;l<n.length;){var c=n[l],u=a[l];if(!0===Util$1.objHasKay(u,"row")&&!1===Util$1.objHasKay(c,"row")&&!1===Util$1.objHasKay(u,"index")&&delete u.row,c.id&&c.id!==u.id||c.tagName!==u.tagName||"String"===Util$1.paramType(c.className)&&(u.className.indexOf(c.className)<0||c.className.indexOf(u.className)<0)||u.index!==c.index||u.row!==c.row){s=!1;break}l++}return!0===s&&(e.newPath=o),s}function isClassContrast(e,t){var i=e?e.className:null;return!!("String"===Util$1.paramType(i)&&"String"===Util$1.paramType(t)&&(i=Util$1.trim(i)||null,t=Util$1.trim(t)||null,i&&t&&i.indexOf(t)>-1))}function bindingContrast(e,t){for(var i=0;i<t.length;i++){var r=t[i];if("text"===r.prop_name){if(getElementContent(e)!==r.value)return!1}else if("class"===r.prop_name&&!isClassContrast(e,r.value))return!1}return!0}function pathContrast(e,t,i){var r=!0,a=!1;if(t.bindings=t.bindings||t.props_binding,t.bindings&&t.bindings.length>0&&(a=!0,r=bindingContrast(e.ele,t.bindings)),!0===r&&e.newPath&&t.newPath&&(a=!0,r=newPathContrast(e,t.newPath,i)),a)return r;var n=e.path||e.link,o=t.path||t.link,s=e.index||0,l=t.index||0,c=e.ele||null,u=t.isText||"";if(""!==u&&u!==getElementContent(c))return!1;if(n===o&&s===l)return!0;var p=n.split("<"),g=o.split("<");if(p.length<g.length)return!1;if(p.length>g.length){var d=p.length-g.length;p=p.splice(d);for(var f=c;d>0&&f;)f=f.parentNode,d--;if(!f)return!1;s=setIndex(f,p.join("<"))}return!(!parentContrast(p,g)||s!==l)}function parseNewPath(e){for(var t=e[0],i=t.id,r=t.className||"",a=t.tagName,n=i?"#"+i:a+r,o=Util$1.selectorAllEleList(n),s=0,l=[];s<o.length;){var c=o[s],u=domParentList(c);!0===checkNewPathBase(u.newPath,e)&&!0===newPathContrast(u,e)&&l.push(c),s++}return l}function parseEvent(e){var t=parserDom(e);if(0!==t.length){var i=t[0];i.elePath.indexOf("#")>-1&&(i.elePath="#"+i.elePath.split("#")[1]);for(var r=Util$1.selectorAllEleList(i.elePath),a=[],n=0;n<r.length;n++){!0===pathContrast({path:domParentList(r[n]).path},{path:e})&&a.push(r[n])}return a}}function parserDom(e){var t=[];if(e.indexOf("<")<0)return[{elePath:e}];for(var i=e.split("<"),r=0;r<i.length;r++){var a=i[r];t.push({elePath:a})}return t}function eleOffset(e){for(var t=0,i=0,r=0,a=0,n=!1;null!=e;){t+=e.offsetTop,i+=e.offsetLeft;try{var o=getConstantStyle(e,"transform");o&&"none"!==o&&(t+=parseFloat(o.substring(6).split(",")[4]),i+=parseFloat(o.substring(6).split(",")[5]))}catch(e){}try{var s=getConstantStyle(e,"position");s&&"fixed"===s&&(n=!0)}catch(e){}(e=e.offsetParent)&&(e.scrollTop||e.scrollLeft)&&(r+=e.scrollTop||0,a+=e.scrollLeft||0)}return!0===n&&(t+=r,i+=a,t+=document.documentElement.scrollTop||0,i+=document.documentElement.scrollLeft||0),{top:t,left:i,hidden:!1,bodyScrollTop:document.documentElement.scrollTop||0,bodyScrollLeft:document.documentElement.scrollLeft||0,eleScrollTop:r,eleScrollLeft:a}}function getConstantStyle(e,t){var i=document.defaultView;return i&&i.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:0}function setIndex(e,t){var i=parserDom(t);if(0===i.length)return 0;var r=i[0];r.elePath.indexOf("#")>-1&&(r.elePath="#"+r.elePath.split("#")[1]);for(var a=Util$1.selectorAllEleList(r.elePath),n=0,o=0;o<a.length;o++){if(!0===pathContrast({path:domParentList(a[o]).path},{path:t})){if(a[o]===e)return n;n++}}return 0}function backH5PathProPath(e,t){var i=Util$1.arrayMerge([],e),r=Util$1.arrayMerge([],t.h5_path),a=t.step;0!==a&&i.splice(0,a),r.splice(r.length-1,1);for(var n=0;n<i.length;n++)r.push(i[n]);return r}function getRelated(e,t,i){if(!e)return{};"Object"===Util$1.paramType(e)&&(e=[e]);for(var r={},a=[],n={},o=0;o<e.length;o++){var s=e[o],l=s.target.h5_path;if(l){var c=parseNewPath(l)[0],u=c?getElementContent(c):"",p=getProperties(s.properties,u);r=Util$1.objMerge(r,p)}else a.push(s)}if(a.length>0){if(!1!==Util$1.isiOS)return HybridAns.visitorProperties[i]=function(e){return function(i){e=Util$1.objMerge(e,i),t(e)}}(r),void window.webkit.messageHandlers.AnalysysAgentGetProperty.postMessage([JSON.stringify(a),i]);n=window.AnalysysAgentHybrid.getProperty(JSON.stringify(a)),"String"===Util$1.paramType(n)&&(n=JSON.parse(n)),r=Util$1.objMerge(r,n)}else!0===Util$1.isiOS&&!0===baseConfig.base.isHybrid&&t&&t(r);return r}function getProperties(e,t){for(var i={},r=0;r<e.length;r++){var a=e[r],n=a.prop_type;t=!0===Util$1.objHasKay(a,"value")?a.value:t;var o=a.regex,s=a.key;if(o)try{o=Util$1.decode(o),t=new RegExp(o).exec(t)}catch(e){}if("number"===n)try{t=Number(t)}catch(e){}else if("bool"===n)"Boolean"!==Util$1.paramType(t)&&("true"===t||"1"===t?t=!0:"false"!==t&&"0"!==t||(t=!1));else try{t=t.toString()}catch(e){}i[s]=t}return i}function backEasyPath(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].tagName);return t.join(">")}function checkNewPathBase(e,t){if(!t)return!!e;var i=JSON.parse(JSON.stringify(e)),r=JSON.parse(JSON.stringify(t));i.reverse(),r.reverse();var a=backEasyPath(i),n=backEasyPath(r);return a.indexOf(n)>-1}function getJSON(e){if("String"===Util$1.paramType(e)){e.indexOf("\n")>-1&&(e=e.replace(/[\r\n]/g,""));try{return JSON.parse(e)}catch(e){}try{return window.AnalysysModule.zipInflate(e)}catch(e){}return"H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA="===e?{code:200}:"H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA="===e?{code:500}:"H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA=="===e?{code:420}:{code:200}}return"Object"===Util$1.paramType(e)?e:{code:200}}function GetHttpObj(){var e=null;if(window.XDomainRequest)return new window.XDomainRequest;if(window.XMLHttpRequest)e=new window.XMLHttpRequest;else try{e=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){try{e=new window.ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new window.XMLHttpRequest}}return e}function xmlhttp(e){var t=!1,i=new GetHttpObj;i.onload=function(){t||(t=!0,e.success(getJSON(i.responseText),i))},i.onerror=function(){t||(t=!0,e.error(getJSON(i.responseText),i))},i.onreadystatechange=function(e,i){return function(){if(4===e.readyState){try{if(e.getAllResponseHeaders().indexOf("Date")>-1||e.getAllResponseHeaders().indexOf("date")>-1){var r=+new Date,a=e.getResponseHeader("Date")||e.getResponseHeader("date");a&&!0===baseConfig.base.allowTimeCheck?Storage$1.setLocal("ANSSERVERTIME",+new Date(a)-r):Storage$1.setLocal("ANSSERVERTIME",0)}}catch(e){}if(e.status>=200&&e.status<300||304===e.status){if(t)return;t=!0,i.success(getJSON(e.responseText),e)}else{if(t)return;t=!0,i.error()}e.onreadystatechange=null,e.onload=null}}}(i,e);try{i.open(e.type,e.url,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var r=baseConfig.base.sendDataTimeout;if("GET"===e.type?(r=baseConfig.base.getDataTimeout,i.send(null)):i.send(e.data),"Number"===Util$1.paramType(r))if("Number"===Util$1.paramType(i.timeout))i.timeout=r;else{var a=function(e){return function(){e.abort()}}(i);setTimeout(a,r)}}catch(e){}}function ajax(){this.url="",this.data="",this.type="GET",this.success=function(){},this.error=function(){}}function getMsg(e){Util$1.addEvent(window,"message",(function(t){var i=t.data;try{"String"===Util$1.paramType(i)&&(i=JSON.parse(i))}catch(e){}e(i)}))}ajax.prototype.get=function(e){var t=[];for(var i in e.data)t.push(i+"="+encodeURIComponent(e.data[i]));var r=e.url.indexOf("?")>-1?e.url+"&"+t.join("&"):e.url+"?"+t.join("&");this.url=r,this.data=e.data,this.type="GET",this.success=e.success||function(){},this.error=e.error||function(){},xmlhttp(this)},ajax.prototype.post=function(e){this.url=e.url,this.data=e.data,this.type="POST",this.success=e.success||function(){},this.error=e.error||function(){},xmlhttp(this)};var errorMessage={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\n",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"{FN}:Property value invalid of key[{KEY}], support type: Boolean/Array/String/Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}"},successMessage={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys JS sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed"};function successLog(e){if(1===baseConfig.base.$debug||2===baseConfig.base.$debug){var t=baseConfig.status,i=t.successCode,r=t.FnName,a=t.key,n=t.value,o=successMessage[i]||successMessage.common;"String"===Util$1.paramType(a)&&a.length>30&&(a=Util$1.stringSlice(a,30)+"..."),"String"===Util$1.paramType(r)&&r.length>30&&(r=Util$1.stringSlice(r,30)+"...");var s=o.replace("{FN}",r).replace("{KEY}",a).replace("{VALUE}",n);e&&(s=e),s&&console.log(s)}}function errorLog(){if(1===baseConfig.base.$debug||2===baseConfig.base.$debug){var e=baseConfig.status,t=e.errorCode,i=e.FnName,r=e.key,a=e.value;"Object"===Util$1.paramType(a)&&(a=JSON.stringify(a));var n=Util$1.paramType(a);"600018"!==t||r||(t="600011"),"60005"!==t||r||(t="600017"),("600017"===t||"600019"===t||"60009"===t||"600010"===t||"60005"===t)&&"String"===Util$1.paramType(a)&&a.length&&a.length>30&&(a=Util$1.stringSlice(a,30)+"..."),"String"===Util$1.paramType(r)&&r.length>30&&(r=Util$1.stringSlice(r,30)+"..."),"String"===Util$1.paramType(i)&&i.length>30&&(i=Util$1.stringSlice(i,30)+"...");var o=(errorMessage[t]||errorMessage.common).replace("{FN}",i).replace("{KEY}",r).replace("{VALUE}",a).replace("{VALUETYPE}",n);if(console.warn(o),lifecycle$5.errorLog&&lifecycle$5.errorLog.init&&"60008"!==t){var s=baseConfig.status.FnName;lifecycle$5.errorLog.init(o),baseConfig.status.FnName=s}}}var visitorConfig={},patt=/\d{13}/g,clickEleObj={path:"",index:0,ele:null,newPath:{},elePostion:{}};function loadVisitorSDK(){var e=[];Util$1.addScript("AnalysysAgent_JS_SDK_VISUAL",visitorConfig.SDKFileDirectory,(function(){if(window.AnalysysModule&&window.AnalysysModule.visual)for(var t=0;t<e.length;t++)window.AnalysysModule.visual.msg(e[t])})),window.ARK_VISUAL={config:visitorConfig},Storage$1.setSession("visitor",!0),getMsg((function(t){window.AnalysysModule&&window.AnalysysModule.visual?window.AnalysysModule.visual.msg(t):e.push(t)}))}function IsReverse(e){return e.split("").reverse().join("")}function checkPointBase(e,t){var i=IsReverse(e),r=IsReverse(t);return i.indexOf(r)>-1}function addElesListener(){!0===visitorConfig.isHybrid&&(visitorEventList=HybridAns.visitorEventList);for(var e=0;e<visitorEventList.length;e++){var t=Util$1.toDeep(visitorEventList[e]),i=t.path,r=t.index,a=t.new_path,n=t.bindings,o=t.elePath,s=t.eleClass,l=clickEleObj.ele,c=!1,u=t.appEventId||t.event_id,p=t.isText,g={path:i,index:r,newPath:a,bindings:n,isText:p};if((a||n)&&1==checkNewPathBase(clickEleObj.newPath,a)){if(!0===pathContrast(clickEleObj,g)){var d="Track"+ +new Date,f=function(e,t,i){return function(r){r=r||{},t&&t.length>0&&(r=Util$1.objMerge(r,getProperties(t))),r=Util$1.delEmpty(r),!0===visitorConfig.isHybrid?!0===Util$1.isiOS?(window.webkit.messageHandlers.AnalysysAgentTrack.postMessage([e,JSON.stringify(r),JSON.stringify(i)]),console.log("触发的埋点发送到ios",[e,JSON.stringify(r),JSON.stringify(i)])):(window.AnalysysAgentHybrid.AnalysysAgentTrack(e,JSON.stringify(r),JSON.stringify(i)),console.log("触发的埋点发送到android",[e,JSON.stringify(r),JSON.stringify(i)])):window.AnalysysAgent.track(e,r)}}(u,t.properties,clickEleObj.elePostion);if(t.related&&t.related.length>0)for(var m=0;m<t.related.length;m++){var y=t.related[m].target;y.h5_path&&(y.path=y.h5_path,t.related[m].target.h5_path=backH5PathProPath(clickEleObj.newPath,y))}else t.related=[];if(!0===Util$1.isiOS&&!0===visitorConfig.isHybrid)return void getRelated(t.related,f,d);f(getRelated(t.related))}}else if(!a&&!n&&!0===checkPointBase(clickEleObj.elePath,o)){if(s===clickEleObj.eleClass&&r===clickEleObj.index)c=!0;else parseEvent(i)[r]!==l&&!0!==pathContrast(clickEleObj,g)||(c=!0);if(!0===c)if(p)p===getElementContent(l)&&window.AnalysysAgent.track(u);else window.AnalysysAgent.track(u)}}}var visitorEventList=[];function getVisitorEvent(){if(!0===visitorConfig.isHybrid){if(!0===Util$1.isiOS&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.AnalysysAgentGetEventList)window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.AnalysysAgentGetEventList.postMessage([]);else if(window.AnalysysAgentHybrid){var e=window.AnalysysAgentHybrid.getEventList();e&&HybridAns.onEventList(e)}}else if(visitorConfig.visitorConfigURL){"/"!==visitorConfig.visitorConfigURL.charAt(visitorConfig.visitorConfigURL.length-1)&&(visitorConfig.visitorConfigURL+="/");var t=window.location.hash;t&&t.indexOf("?")>-1&&(t=t.split("?")[0]);var i=window.location.protocol+"//"+window.location.host+window.location.pathname+t;visitorEventList=[],getPoint(i)}}function parsePath(e){for(var t=e.split("<"),i=t[0].split(".")[1]||"",r=[],a=0;a<t.length;a++)r.push(t[a].split(".")[0]);return{class:i,clickPath:r.join("<")}}function getPoint(e){var t=visitorConfig.visitorConfigURL+"configure",i=function(e){if(0===e.code){for(var i=visitorEventList,r=[],a=0;a<e.data.length;a++){var n=e.data[a],o=parsePath(n.link),s=n.index,l=o.clickClass,c=o.clickPath,u=n.isText,p=n.link;!0===patt.test(p)&&(p=p.replace(patt,"")),i.push({index:s,eleClass:l,elePath:c,isText:u,path:p,appEventId:n.appEventId,new_path:n.new_path,bindings:n.props_binding,related:n.related,properties:n.properties});var g={eventID:n.appEventId,eventName:n.appEventName||""};r.push(g)}visitorEventList=i,successLog("Get Visual Event List from "+t),successLog(JSON.stringify(r,null,2))}},r={url:t,data:{appkey:visitorConfig.appid,lib:"Js",url:e},success:i,error:function(){}};(new ajax).get(r)}var url=window.location.href,detect$1=Util$1.detectZoom();function pcMouseOver(e){var t=!1;e.touches&&e.touches.length>0&&(e=e.touches[0],t=!0);var i=e.target,r=domParentList(i),a=r.path,n=parsePath(a),o=n.clickClass,s=n.clickPath,l=setIndex(i,r.path);(clickEleObj={index:l,eleClass:o,elePath:s,path:a,newPath:r.newPath,ele:i}).elePostion={$pos_left:e.clientX*detect$1,$pos_top:e.clientY*detect$1,$pos_width:i.offsetWidth*detect$1,$pos_height:i.offsetHeight*detect$1},t?addElesListener():Util$1.addEvent(i,"mousedown",addElesListener,!0)}function pcMouseOut(e){var t=(e=e||window.event).target||e.srcElement;clickEleObj={},Util$1.removeEvent(t,"mousedown",addElesListener,!0)}function addEventListener(){"desktop"===Util$1.deviceType()?(Util$1.addEvent(document,"mouseover",pcMouseOver,!0),Util$1.addEvent(document,"mouseout",pcMouseOut,!0)):Util$1.addEvent(document,"touchstart",pcMouseOver,!0),Util$1.changeHash((function(){url!==window.location.href&&(url=window.location.href,getVisitorEvent())}))}function visitorInit(e){return visitorConfig=e,!1===e.isHybrid&&(window.location.href.indexOf("visual=true")>-1||!0===Storage$1.getSession("visitor")&&window.location.href.indexOf("arkheatmap=true")<0)?loadVisitorSDK():(getVisitorEvent(),addEventListener()),e}var lifecycle$1={AnalysysAgent:{init:visitorInit}},visitor=Object.freeze({__proto__:null,fieldRules:fieldRules$1,fieldTemplate:fieldTemplate$1,lifecycle:lifecycle$1}),startDate=+new Date;function getViewPortWidth(){return document.documentElement.clientWidth||document.body.clientWidth}function getViewPortHeight(){return document.documentElement.clientHeight||document.body.clientHeight}function getScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop}function getDuration(){var e=+new Date,t=e-startDate;if(startDate=e,"Number"===Util$1.paramType(baseConfig.base.webstayDuration)&&baseConfig.base.webstayDuration>0){if(t>baseConfig.base.webstayDuration)return baseConfig.base.webstayDuration}else if(t>18e6)return 18e6;return t}function getDeviceType(){return Util$1.deviceType()}var fieldRules$2={autoWebstay:{check:{value:["isBoolean"]}},xcontext:{$viewport_width:{valueType:0,value:getViewPortWidth},$viewport_position:{valueType:0,value:getScrollTop},$viewport_height:{valueType:0,value:getViewPortHeight},$event_duration:{valueType:0,value:getDuration},$device_type:{valueType:0,value:getDeviceType}}},fieldTemplate$2={$webstay:{xcontext:["$referrer","$referrer_domain","$title","$url","$viewport_width","$viewport_position","$viewport_height","$event_duration","$device_type","$session_id","$is_time_calibrated","$is_first_day"]}},interval=null,topValue=0;function initWebStay(){function e(){return!0===isRoot?document.documentElement.scrollTop||document.body.scrollTop:rootEle.scrollTop||0}function t(){var i=e();topValue===i&&(clearTimeout(interval),interval=null,window.AnalysysAgent&&window.AnalysysAgent.freeApi?window.AnalysysAgent.freeApi("$webstay"):setTimeout((function(){t()}),100))}Util$1.addEvent(rootEle,"scroll",(function(){clearTimeout(interval),interval=setTimeout(t,1e3),topValue=e()}))}var rootEle=window,isRoot=!0;function autoWebstayInit(e){if(!0===e.autoHeatmap&&!0===e.autoWebstay&&!1===e.isHybrid){var t=e.webstayRootEle;t&&Util$1.addEvent(window,"load",(function(){var e=null;if("String"===Util$1.paramType(t)){var i=Util$1.selectorAllEleList(t);i.length>0&&(e=i[0])}else"Function"===Util$1.paramType(t)?e=t.call(t)||null:"object"==typeof t&&1===t.nodeType&&(e=t);e&&(isRoot=!1,rootEle=e),initWebStay()}))}else initWebStay();return e}var lifecycle$2={AnalysysAgent:{init:autoWebstayInit}},webstay=Object.freeze({__proto__:null,fieldRules:fieldRules$2,fieldTemplate:fieldTemplate$2,lifecycle:lifecycle$2}),elePostion={ele:"",click_x:0,click_y:0,clickEle:""};function domParentList$1(e){for(var t=[],i=e;null!=i;){var r=0;if(i.parentNode){var a=i.parentNode.children;if(a)for(var n=0;n<a.length;n++)a[n]===i&&(r=n)}var o=i.tagName;if(o){o=o.toLowerCase();var s=i.id?"#"+i.id:"",l=i.className&&"String"===Util$1.paramType(i.className)?i.className.split(" "):[];if(l.length>0){for(var c="",u=0;u<l.length;u++)l[u]&&l[u].indexOf("ARK")<0&&(c+="."+l[u]);t.push(o+s+c+"|"+r)}else t.push(o+s+"|"+r);i=i.parentNode}else i=i.parentNode}return t.join("<")}function getPageWidth(){return document.documentElement.scrollWidth}function getPageHeight(){return document.documentElement.scrollHeight}function getClickX(){return elePostion.click_x}function getClickY(){return elePostion.click_y}function getElementPath(){return domParentList$1(elePostion.ele)}function getUrlPath(){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.hash;try{e=decodeURIComponent(e)}catch(e){}return!0===baseConfig.base.isHybrid&&(e=encodeURIComponent(e)),e}function getElementX(){return elePostion.elementX}function getElementY(){return elePostion.elementY}function getElementType(){return elePostion.ele.tagName.toLowerCase()}function getElementClick(){return"Function"===Util$1.paramType(elePostion.ele.onclick)}function getElementAttrClick(){return elePostion.ele&&null!==elePostion.ele.getAttribute("data-ark-click")}function checkElementConfig(e){if(!e||"Array"===Util$1.paramType(e)&&0===e.length||"String"===Util$1.paramType(e)&&""===e)return!1;var t=elePostion.ele;if("String"===Util$1.paramType(e)){var i=t.tagName.toLowerCase(),r="String"===Util$1.paramType(t.className)?"."+t.className.split(" ").join("."):"",a=t.id?"#"+t.id:"";if(i===e.toLowerCase()||r===e||a===e||i+r===e||i+a===e||a+r===e||i+a+r===e)return!0}else if("Array"===Util$1.paramType(e)){for(var n=0;n<e.length;n++)if(!0===checkElementConfig(e[n]))return!0}else{if("Function"===Util$1.paramType(e))return e.call(e,t)||!1;if("object"==typeof e&&e===t)return!0}return!1}function getParentClickableElement(){for(var e=elePostion.ele;null!=elePostion.ele;)if(1===elePostion.ele.nodeType){if(getElementClick()||1===getElementClickable()||getElementAttrClick()||checkElementConfig(baseConfig.base.trackList)){e=elePostion.ele;break}elePostion.ele=elePostion.ele.parentNode}else elePostion.ele=elePostion.ele.parentNode;elePostion.ele=e}function getElementClickable(){var e=getElementType();if(["a","button","input","select","textarea","svg"].indexOf(e)>-1||getElementAttrClick()||checkElementConfig(baseConfig.base.trackList)){if("svg"===e&&elePostion.ele.children&&elePostion.ele.children.length>0){for(var t=0,i=elePostion.ele.children,r=0;r<i.length;r++)"use"===i[r].tagName.toLowerCase()&&(i[r].getAttribute("xlink:href")||getElementAttrClick()||checkElementConfig(baseConfig.base.trackList))&&(t=1);return t}return 1}return 0}function getEleContent(){return getElementContent(elePostion.ele)}function getDeviceType$1(){return Util$1.deviceType()}function getElementId(){return elePostion.ele.id||elePostion.ele.getAttribute("id")||""}function getElementName(){return elePostion.ele.getAttribute("name")||""}function getElementClassName(){var e=elePostion.ele.getAttribute("class")||"";if(e){for(var t=e.split(" "),i=[],r=0;r<t.length;r++)""!==t[r]&&i.push(t[r]);return e="."+i.join(".")}return""}function getElementTargetUrl(){var e=elePostion.ele.getAttribute("href");if(e&&e.indexOf("javascript:")<0){try{e=decodeURIComponent(e)}catch(e){}return!0===baseConfig.base.isHybrid&&(e=encodeURIComponent(e)),e}return""}var fieldRules$3={autoHeatmap:{check:{value:["isBoolean"]}},xcontext:{$page_width:{valueType:0,value:getPageWidth},$page_height:{valueType:0,value:getPageHeight},$click_x:{valueType:0,value:getClickX},$click_y:{valueType:0,value:getClickY},$element_path:{valueType:0,value:getElementPath},$url_path:{valueType:0,value:getUrlPath},$element_x:{valueType:0,value:getElementX},$element_y:{valueType:0,value:getElementY},$element_type:{valueType:0,value:getElementType},$element_clickable:{valueType:0,value:getElementClickable},$element_content:{valueType:0,value:getEleContent},$device_type:{valueType:0,value:getDeviceType$1},$element_id:{valueType:0,value:getElementId},$element_name:{valueType:0,value:getElementName},$element_target_url:{valueType:0,value:getElementTargetUrl},$element_class_name:{valueType:0,value:getElementClassName}}},fieldTemplate$3={$web_click:{xcontext:["$page_width","$page_height","$click_x","$click_y","$element_path","$url_path","$url","$title","$session_id","$device_type","$session_id","$is_time_calibrated","$element_x","$element_y","$element_type","$element_clickable","$element_content","$is_first_day","$element_id","$element_name","$element_target_url","$element_class_name"]}},heatmapConfig={};function loadHeatmapSDK(){document.body&&document.getElementsByTagName("body")[0]?(Util$1.addScript("AnalysysAgent_JS_SDK_HEATMAP",heatmapConfig.SDKFileDirectory),window.ARK_HEATMAP={config:heatmapConfig}):setTimeout(loadHeatmapSDK,50)}function offset(e,t){for(var i="offset"+t.split("")[0].toUpperCase()+t.substring(1),r=e[i],a=e.offsetParent;null!=a;)r+=a[i],a=a.offsetParent;return r}function addClickEvent(e){var t=e||window.event;t.touches&&t.touches.length>0&&(t=t.touches[0]);var i=t.target||t.srcElement;if(!(Util$1.checkTypeList(heatmapConfig.heatMapBlackList,i)||heatmapConfig.heatMapWhiteList&&!Util$1.checkTypeList(heatmapConfig.heatMapWhiteList,i))){var r=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,n=t.pageX||t.clientX+r,o=t.pageY||t.clientY+a;elePostion.click_x=n,elePostion.click_y=o,elePostion.clickEle=elePostion.ele=i,getParentClickableElement(),elePostion.elementX=n-offset(elePostion.ele,"left"),elePostion.elementY=o-offset(elePostion.ele,"top"),!n||!o||n<=0||o<=0||(window.AnalysysAgent&&window.AnalysysAgent.freeApi?window.AnalysysAgent.freeApi("$web_click"):setTimeout((function(){addClickEvent(e)}),100))}}function initHeatmap(){"desktop"==Util$1.deviceType()?Util$1.addEvent(document,"click",addClickEvent):Util$1.addEvent(document,"touchstart",addClickEvent)}function heatmapInit(e){return heatmapConfig=e,window.location.href.indexOf("arkheatmap=true")>-1||window.name.indexOf("arkheatmap=true")>-1?(""===window.name&&(window.name=window.location.href),loadHeatmapSDK()):!0===e.autoHeatmap&&!1===e.isHybrid&&initHeatmap(),e}for(var lifecycle$3={AnalysysAgent:{init:heatmapInit}},heatmap=Object.freeze({__proto__:null,fieldRules:fieldRules$3,fieldTemplate:fieldTemplate$3,lifecycle:lifecycle$3}),fieldRules$4={xcontext:{$user_agent:{valueType:1,value:encodeURIComponent(window.navigator.userAgent)}}},temp={},event=["$startup","$track","$pageview","$webstay","$web_click","$errorLog","$user_click"],common={xcontext:["$user_agent"]},i=0;i<event.length;i++)temp[event[i]]=common;var ua=Object.freeze({__proto__:null,fieldRules:fieldRules$4,fieldTemplate:temp}),fieldRules$5={xcontext:{$page_width:{valueType:0,value:getPageWidth},$page_height:{valueType:0,value:getPageHeight},$element_path:{valueType:0,value:getElementPath},$url_path:{valueType:0,value:getUrlPath},$element_type:{valueType:0,value:getElementType},$element_clickable:{valueType:0,value:getElementClickable},$element_content:{valueType:0,value:getEleContent},$device_type:{valueType:0,value:getDeviceType$1},$element_id:{valueType:0,value:getElementId},$element_name:{valueType:0,value:getElementName},$element_target_url:{valueType:0,value:getElementTargetUrl},$element_class_name:{valueType:0,value:getElementClassName}}},fieldTemplate$4={$user_click:{xcontext:["$url_path","$url","$title","$is_first_day","$session_id","$is_time_calibrated","$device_type","$element_type","$element_path","$element_content","$element_id","$element_name","$element_target_url","$element_class_name"]}},userClickConfig={};function addClickEvent$1(e){var t=e||window.event;t.touches&&t.touches.length>0&&(t=t.touches[0]);var i=t.target||t.srcElement;if(!(Util$1.checkTypeList(userClickConfig.autoClickBlackList,i)||userClickConfig.autoClickWhiteList&&!Util$1.checkTypeList(userClickConfig.autoClickWhiteList,i))&&(elePostion.ele=i,getParentClickableElement(),1===getElementClickable())){var r=userClickConfig.user_click_property,a={};if("Object"===Util$1.paramType(r)){for(var n in r)"Function"===Util$1.paramType(r[n])&&(r[n]=r[n].call(r[n],i));a=r}else"Function"===Util$1.paramType(r)&&(a=r.call(r,i));var o=elePostion.ele.getAttribute("data-ark-click")||{};if("String"===Util$1.paramType(o))try{o=JSON.parse(o)}catch(t){}"Object"!==Util$1.paramType(o)&&(o={}),"Object"===Util$1.paramType(a)&&(o=Util$1.objMerge(a,o)),window.AnalysysAgent.freeApi("$user_click",o)}}function addListenerUserClick(){"desktop"===Util$1.deviceType()?Util$1.addEvent(document,"mousedown",addClickEvent$1):Util$1.addEvent(document,"touchstart",addClickEvent$1)}function userClickInit(e){return userClickConfig=e,!0===e.autoTrack&&addListenerUserClick(),e}for(var lifecycle$4={AnalysysAgent:{init:userClickInit}},userClick=Object.freeze({__proto__:null,fieldRules:fieldRules$5,fieldTemplate:fieldTemplate$4,lifecycle:lifecycle$4}),plugList=[visitor,webstay,heatmap,ua,userClick],fieldRules$6=fieldRules||{},fieldTemplate$5=fieldTemplate||{},lifecycle$5=lifecycle||{},i$1=0;i$1<plugList.length;i$1++)plugList[i$1].fieldRules&&(fieldRules$6=Util$1.objMerge(fieldRules$6,plugList[i$1].fieldRules)),plugList[i$1].fieldTemplate&&(fieldTemplate$5=Util$1.objMerge(fieldTemplate$5,plugList[i$1].fieldTemplate)),plugList[i$1].lifecycle&&(lifecycle$5=Util$1.fnMerge(lifecycle$5,plugList[i$1].lifecycle));for(var eventTemp={},commonTemp={},baseTemp=fieldTemplate$5.base,outerTemp=baseTemp.outer,i$2=0;i$2<outerTemp.length;i$2++)baseTemp[outerTemp[i$2]]?commonTemp[outerTemp[i$2]]=Util$1.toObj(baseTemp[outerTemp[i$2]]):commonTemp[outerTemp[i$2]]="";for(var key in fieldTemplate$5)if("base"!==key){var keyTemp=Util$1.toDeepObj(fieldTemplate$5[key]);eventTemp[key+"base"]=keyTemp,eventTemp[key]=Util$1.objMerge(commonTemp,keyTemp)}function temp$1(e){return eventTemp[e]||eventTemp.commonTemp}eventTemp.commonTemp=commonTemp;var CheckField=function(){};CheckField.prototype=Util$1,CheckField.prototype.isString=function(e){return baseConfig.status.errorCode="60001","String"===Util$1.paramType(e)},CheckField.prototype.isNumber=function(e){return baseConfig.status.errorCode="60002","Number"===Util$1.paramType(e)},CheckField.prototype.isBoolean=function(e){return baseConfig.status.errorCode="60003","Boolean"===Util$1.paramType(e)},CheckField.prototype.isObject=function(e){return"Object"===this.paramType(e)},CheckField.prototype.lengthRule=function(e,t,i){this.isNumber(i)||(i=1/0);var r=!0;return this.isNumber(t)&&e.length&&e.length>t&&e.length<i+1||(baseConfig.status.errorCode="60005",r=!1),r},CheckField.prototype.nimLength=function(e){return this.lengthRule(e,0)},CheckField.prototype.length99=function(e){var t=this.lengthRule(e,0,99);return t||(baseConfig.status.errorCode="600010"),t},CheckField.prototype.length125=function(e){var t=this.lengthRule(e,0,125);return t||(baseConfig.status.errorCode="60009"),t},CheckField.prototype.length255=function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return baseConfig.status.errorCode="60005",!1;"String"!==this.paramType(e)&&(e=e.toString());var t=this.lengthRule(e,0,255);return t||(baseConfig.status.errorCode="600019"),t},CheckField.prototype.keyLength255=function(e){var t=this.length255(e);return t||(baseConfig.status.errorCode="600017"),t},CheckField.prototype.isUrl=function(e){var t=e;return!0===new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(t)||(baseConfig.status.errorCode="60006",!1)},CheckField.prototype.isDebug=function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)},CheckField.prototype.notObject=function(e){var t=!this.isObject(e);return t||(baseConfig.status.errorCode="600020"),t},CheckField.prototype.notSpecialCharacters=function(e){return!(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]","gi").test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||(baseConfig.status.errorCode="600011",!1)},CheckField.prototype.isArrayString=function(e){if("Array"===this.paramType(e))for(var t=0;t<e.length;t++){if("String"!==this.paramType(e[t]))return baseConfig.status.errorCode="600013",!1;if(!this.length255(e[t]))return e[t]&&e[t].length>500&&(e[t]=Util$1.stringSlice(e[t],499)+"$"),baseConfig.status.value=e[t],!1}return!0},CheckField.prototype.keywords=function(e){return!(baseConfig.keywords.indexOf(e)>-1)||(baseConfig.status.errorCode="600012",!1)};var checkRule=new CheckField;function check(e,t){for(var i=0;i<t.length;i++){if(!checkRule[t[i]](e))return!1}return!0}function checkFields(e,t,i){var r=i.check,a=!0;if(!r)return a;var n=r.key,o=r.value||fieldRules$6.xcontextCommonRule.value;return n&&(baseConfig.status.code=200,a=check(e,n),baseConfig.status.key=e,a||(baseConfig.status.code=400,errorLog())),o&&(baseConfig.status.code=200,a=check(t,o),"Array"!==Util$1.paramType(t)&&(baseConfig.status.value=t),a||(baseConfig.status.code=400,errorLog())),a}function resetCode(){baseConfig.status={code:200,FnName:baseConfig.status.FnName,key:"",value:"",errorCode:"",successCode:""}}function fillField(e,t){var i=t||fieldRules$6,r={};for(var a in e){var n=e[a],o=i[a];if(o){var s="";if("Object"===Util$1.paramType(n)){var l=fillField(n,o);r[a]=l}else Util$1.objHasKay(o,"valueType")&&(0===o.valueType&&(s=o.value(),"String"===Util$1.paramType(s)&&s.length>500?r[a]=Util$1.stringSlice(s,499)+"$":r[a]=s),1===o.valueType&&(s=o.value,"String"===Util$1.paramType(s)&&s.length>500?r[a]=Util$1.stringSlice(s,499)+"$":r[a]=s))}}return r}function clearCache(e){if(!(e=e||!1)){var t=baseConfig.base;for(var i in t){if("Object"!==Util$1.paramType(t[i]))if("$debug"===i||"appid"===i||"uploadURL"===i)Storage$1.getLocal("ANS"+i.toUpperCase())!==t[i]&&(e=!0),e&&Storage$1.setLocal("ANS"+i.toUpperCase(),t[i])}}return e&&(removeAliasId(),removeIdentifyId(),Storage$1.removeLocal("ARKSUPER"),Storage$1.removeSession("STARTUP"),Storage$1.setLocal("FRISTDAY",Util$1.format(new Date,"yyyyMMdd")),Storage$1.setLocal("FRISTIME",!0),Storage$1.removeLocal("POSTDATA"),Storage$1.removeLocal("ANSSERVERTIME"),Storage$1.removeLocal("ARKFRISTPROFILE")),e}function isStartUp(){var e=Storage$1.getSession("STARTUP")||!1,t=Storage$1.getCookie("ARK_STARTUP");if(""!==document.referrer&&t&&!0===baseConfig.base.cross_subdomain){var i=JSON.parse(Util$1.decode(decodeURIComponent(t))),r=i.STARTUP,a=i.STARTUPTIME;Storage$1.setSession("STARTUP",r),Storage$1.setSession("STARTUPTIME",a),e=Storage$1.getSession("STARTUP")||!1}if(!1===e){var n=Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");Storage$1.setSession("STARTUP",!0),Storage$1.setSession("STARTUPTIME",n),sessionId.setId(),!0===baseConfig.base.cross_subdomain&&Storage$1.setCookie("ARK_STARTUP",encodeURIComponent(Util$1.encode(JSON.stringify({STARTUP:!0,STARTUPTIME:n}))),"session")}return e}function checkBase(){for(var e in baseConfig.base){resetCode(),baseConfig.status.key=e;var t=fieldRules$6[e];"$debug"===e&&(t=fieldRules$6.xcontext[e]),"$lib_version"===e&&(t=fieldRules$6.xcontext[e]);var i=t;if(i&&!checkFields(e,baseConfig.base[e],i))return baseConfig.base[e]="",!1;successLog()}return!0}function checkPrivate(e,t,i){resetCode();var r=fieldRules$6[t]||fieldRules$6.xcontextCommonRule;if("Object"!==Util$1.paramType(e)||!0===i){var a=r.check.key,n=check(Util$1.trim(e),a);if(baseConfig.status.key=e,!n)return errorLog(),!1}else for(var o in e){checkFields(o,e[o],r)||"600019"===baseConfig.status.errorCode&&"String"===Util$1.paramType(e[o])&&e[o].length>500&&(e[o]=Util$1.stringSlice(e[o],499)+"$")}return!0}var postStatus=!0,sendType="img",rxDangerous=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function delRx(e){if("Array"===Util$1.paramType(e))for(var t=0;t<e.length;t++)e[t]=delRx(e[t]);if("Object"===Util$1.paramType(e))for(var i in e){var r=e[i];e[i]=delRx(r)}if("String"===Util$1.paramType(e)){var a=e.replace(rxDangerous,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));return"Sting"!==Util$1.paramType(a)?e:a}return e}function sendPost(e,t){if(!(Util$1.GetUrlParam("visual")&&Util$1.GetUrlParam("visual").indexOf("true")>-1)){"img"!==sendType&&(postStatus=!1);var i=e;"Array"===Util$1.paramType(e)&&(e=delRx(e),i=JSON.stringify(e)),window.AnalysysModal&&"function"==typeof window.AnalysysModal&&window.AnalysysModal(e);var r=function(){postStatus=!0,baseConfig.status.errorCode="60008",errorLog(),"Function"===Util$1.paramType(t)&&t.call(t)},a=function(e){return function(i){200===i.code||400===i.code||4200===i.code?(baseConfig.status.successCode="20001",successLog(),function(e){postStatus=!0;var t=Storage$1.getLocal("POSTDATA")||[];if(Util$1.isEmptyObject(t)&&(t=[],Storage$1.removeLocal("POSTDATA")),0!==t.length){for(var i=[],r=0;r<t.length;r++){for(var a=!1,n=0;n<e.length;n++)e[n].xwhen!==t[r].xwhen&&e[n].xwhen&&t[r].xwhen||(a=!0);!1!==a||"Object"!==Util$1.paramType(t[r])||Util$1.isEmptyObject(t[r])||i.push(t[r])}i.length>0&&"img"!==sendType?(Storage$1.setLocal("POSTDATA",i),sendPost(i)):Storage$1.removeLocal("POSTDATA")}else Storage$1.removeLocal("POSTDATA")}(e),"Function"===Util$1.paramType(t)&&t.call(t)):r()}}(e),n={url:baseConfig.base.uploadURL+"up?appid="+baseConfig.base.appid,data:i,success:a,error:r};successLog("Send message to server: "+baseConfig.base.uploadURL+"up?appid="+baseConfig.base.appid+"\ndata:"+i),lifecycle$5.upload&&lifecycle$5.upload.init?n=lifecycle$5.upload.init(n):window.AnalysysModule&&"Object"===Util$1.paramType(window.AnalysysModule)&&"Function"===Util$1.paramType(window.AnalysysModule.uploadData)&&(window.AnalysysModule.encryptInit(baseConfig.base),n=window.AnalysysModule.uploadData(n)),"img"!==sendType?"post"!==sendType?"send"!==sendType?(new ajax).post(n):snedGet(n,"send"):(new ajax).post(n):snedGet(n,"img")}}function setValidKey(e){var t={data:e.data,send_type:""},i=[];for(var r in t)i.push(r+"="+encodeURIComponent(t[r]));var a=e.url.indexOf("?")>-1?e.url+"&"+i.join("&"):e.url+"?"+i.join("&");a=a.replace(baseConfig.base.uploadURL,"/");var n=Util$1.MD5(a,32).split(""),o=n[2]+""+n[0]+n[4];return t.send_type=o,t}function snedGet(e,t){if("send"===t&&navigator.sendBeacon)navigator.sendBeacon(e.url,e.data)&&e.success({code:200});else if("send"!==t||navigator.sendBeacon||(t="img"),e.data=Util$1.encode(e.data),e.data=setValidKey(e),"img"===t){var i=[];for(var r in e.data)i.push(r+"="+encodeURIComponent(e.data[r]));var a=e.url.indexOf("?")>-1?e.url+"&"+i.join("&"):e.url+"?"+i.join("&"),n=document.createElement("img"),o=null;n.width=1,n.height=1,n.onerror=n.onload=function(){clearTimeout(o),e.success({code:200}),this.src="",this.onload=null,this.onerror=null,this.onabort=null},n.onabort=function(){this.src="",this.onload=null,this.onerror=null,this.onabort=null,e.error()},"Number"===Util$1.paramType(baseConfig.base.sendDataTimeout)&&(o=setTimeout((function(){n.onabort()}),baseConfig.base.sendDataTimeout)),n.src=a}}function checkLogBaseJson(e){if("Object"===Util$1.paramType(e)&&!Util$1.isEmptyObject(e)){for(var t=!0,i=0;i<baseConfig.baseJson.length;i++){var r=baseConfig.baseJson[i];"xwhat"!==r&&((!e[r]||"Object"===Util$1.paramType(e[r])&&Util$1.isEmptyObject(e[r]))&&(t=!1))}return t}return!1}function checkSavaData(e){var t=[];if("Array"===Util$1.paramType(e)&&e.length>0)for(var i=0;i<e.length;i++){var r=checkSavaData(e[i]);r.length>0&&t.push.apply(t,r)}return"Object"===Util$1.paramType(e)&&!Util$1.isEmptyObject(e)&&checkLogBaseJson(e)&&t.push(e),t}function upLog(e,t){baseConfig.base.sendType&&(sendType=baseConfig.base.sendType);var i=[];if("img"===sendType)i=checkSavaData(e);else{var r=Storage$1.getLocal("POSTDATA")||[];0===(r=checkSavaData(r)).length&&Storage$1.removeLocal("POSTDATA"),i=r,r.length<500?i.push.apply(i,checkSavaData(e)):i=checkSavaData(e),Storage$1.setLocal("POSTDATA",i)}if(!1!==postStatus||"img"===sendType){if(i.length>0)if("img"===sendType)for(var a=0;a<i.length;a++)0===a?sendPost([i[a]],t):sendPost([i[a]]);else sendPost(i,t)}else"Function"===Util$1.paramType(t)&&t.call(t)}function loadIframeUrl(e,t){if(document.body){var i=document.createElement("iframe");i.setAttribute("src",e),i.setAttribute("id","AnalysysAgentIframe"),i.setAttribute("style","display:none;"),document.body.appendChild(i),i.parentNode.removeChild(i)}else setTimeout((function(){loadIframeUrl(e)}),200)}function transporter(e,t,i,r){var a={functionName:e,functionParams:t};"String"===Util$1.paramType(i)?a.callbackFunName=i:"Function"===Util$1.paramType(i)&&(r=i);var n=JSON.stringify(a);if(successLog("Send message to app: \ndata:"+n),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.AnalysysAgent)postMessage(a);else if(window.AnalysysAgentHybrid&&window.AnalysysAgentHybrid.analysysHybridCallNative)callNative(n);else{loadIframeUrl("xib://app/analysysagent:"+n)}"Function"===Util$1.paramType(r)&&r.call(r)}function backParamsArray(){for(var e=arguments,t=[],i=null,r=0;r<e.length;r++)if(void 0!==e[r]){if("Object"===Util$1.paramType(e[r]))for(var a in e[r])"Function"===Util$1.paramType(e[r][a])&&(e[r][a]=e[r][a].call(e[r][a]));"Function"===Util$1.paramType(e[r])?i=e[r]:t.push(e[r])}return{argArray:t,callback:i}}function postMessage(e){window.webkit.messageHandlers.AnalysysAgent.postMessage(e)}function callNative(e){window.AnalysysAgentHybrid.analysysHybridCallNative(e)}var pageCloseStatus=!1,pageUrl=window.location.href;function pageView(e,t,i){upLog(pageViewLog(e,t,i),i)}function pageViewLog(e,t,i){var r=e,a=t,n=i;if(window.AnalysysModule&&window.AnalysysModule.pageClose&&(!0===pageCloseStatus?window.AnalysysModule.pageClose.pageEndTrack():pageCloseStatus=!0,"String"===Util$1.paramType(r)?window.AnalysysModule.pageClose.createTime(+new Date,r):window.AnalysysModule.pageClose.createTime(+new Date)),!(Util$1.checkTypeList(baseConfig.base.pageViewBlackList)||baseConfig.base.pageViewWhiteList&&!Util$1.checkTypeList(baseConfig.base.pageViewWhiteList))){baseConfig.status.FnName="$pageview",resetCode();var o={};"String"===Util$1.paramType(r)?checkPrivate(o={$title:r}):"Object"===Util$1.paramType(r)?("Function"===Util$1.paramType(a)&&(n=a),a=r,r=""):"Function"===Util$1.paramType(r)&&(n=r,a="",r=""),"Function"===Util$1.paramType(a)&&(n=a,a="");var s={};if("Object"===Util$1.paramType(a)){for(var l in a)"Function"===Util$1.paramType(a[l])&&(a[l]=a[l].call(a[l]));!1===baseConfig.base.isHybrid&&checkPrivate(a),s={xcontext:a||{}}}var c=Storage$1.getLocal("ARKSUPER")||{};!0===baseConfig.base.isHybrid&&(c={});var u=Util$1.objMerge({xcontext:c},s);u=Util$1.objMerge(u,{xcontext:o});var p=temp$1("$pageview"),g=Util$1.delEmpty(fillField(p));if(!0===baseConfig.base.isHybrid){p=temp$1("$pageviewbase"),g=Util$1.delEmpty(fillField(p));var d=Util$1.objMerge(g,u),f=backParamsArray(r||"",d=Util$1.delNotHybrid(Util$1.delEmpty(d.xcontext)),n);return transporter("pageView",f.argArray,f.callback),void setReferrer(pageUrl)}return setReferrer(pageUrl),Util$1.objMerge(g,u)}}function hashPageView(){Util$1.changeHash((function(){pageUrl!==window.location.href&&(pageUrl=window.location.href,pageView())}))}function track(e,t,i){baseConfig.status.FnName=e||"$track",resetCode(),checkPrivate(e,"$track",!0),baseConfig.status.FnName=e;var r={};if("Function"===Util$1.paramType(t)&&(i=t,t={}),"Object"===Util$1.paramType(t)){for(var a in t)"Function"===Util$1.paramType(t[a])&&(t[a]=t[a].call(t[a]));checkPrivate(t),r={xcontext:t}}var n=Storage$1.getLocal("ARKSUPER")||{},o=Util$1.objMerge({xcontext:n},r);if(!0!==baseConfig.base.isHybrid){var s=fillField(temp$1("$track"));s.xcontext=Util$1.delEmpty(s.xcontext),upLog(Util$1.objMerge(s,o),i)}else{var l=fillField(temp$1("$trackbase"));l=Util$1.delEmpty(l);var c=Util$1.objMerge(l,o),u=backParamsArray(e,c=Util$1.delNotHybrid(Util$1.delEmpty(c.xcontext)),i);transporter("track",u.argArray,u.callback)}}function freeApi(e,t){baseConfig.status.FnName=e,resetCode();var i=temp$1(e);if(i)if(!0!==baseConfig.base.isHybrid){var r=fillField(i),a=Storage$1.getLocal("ARKSUPER")||{};"Object"===Util$1.paramType(t)&&(a=Util$1.objMerge(a,t)),r=Util$1.objMerge({xcontext:a},r),upLog(Util$1.delEmpty(r))}else{var n=fillField(temp$1(e+"base"));transporter("track",backParamsArray(e,Util$1.delNotHybrid(Util$1.delEmpty(n.xcontext))).argArray)}}function getPresetProperties(e){if(baseConfig.status.FnName="$getPresetProperties",resetCode(),!0===baseConfig.base.isHybrid){var t="AnsCallback"+ +new Date;return window[t]=function(){e.apply(e,arguments),delete window[t]},void transporter("getPresetProperties",[],t)}var i=fillField(temp$1("$getPresetProperties"));i.xcontext.$first_visit_time=Storage$1.getLocal("ARKFRISTPROFILE")||"",delete i.xcontext.$is_login;var r=Util$1.delEmpty(i.xcontext);return"Function"===Util$1.paramType(e)&&e.call(e,r),r}function alias(e,t){if(baseConfig.status.FnName="$alias",resetCode(),!0!==baseConfig.base.isHybrid){if(checkPrivate(e,"$alias",!0)){Storage$1.setLocal("ARK_LOGINID",e);var i=fillField(temp$1("$alias"));if(upLog(Util$1.delEmpty(i),t),!0===baseConfig.base.autoProfile){baseConfig.status.FnName="$profile_set_once";var r=fillField(temp$1("$profile_set_once")),a=Storage$1.getLocal("ARKFRISTPROFILE")||Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS"),n={$first_visit_time:a,$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},o=Util$1.objMerge(r,{xcontext:n});upLog(Util$1.delEmpty(o)),Storage$1.setLocal("ARKFRISTPROFILE",a)}}}else{var s=backParamsArray(e,"",t);transporter("alias",s.argArray,s.callback)}}function identify(e,t,i){if(baseConfig.status.FnName="$identify",resetCode(),!0!==baseConfig.base.isHybrid){checkPrivate(e,"$alias",!0)&&("Boolean"===Util$1.paramType(t)&&!0===t?Storage$1.setLocal("ARK_TRACK_LOGIN",!0):"Function"===Util$1.paramType(t)&&(i=t),Storage$1.setLocal("ARK_TRACKID",e),Storage$1.setCookie("ARK_ID",e),baseConfig.status.successCode="20002",baseConfig.status.value=e,successLog(),"Function"===Util$1.paramType(i)&&i.call(i),window.AnalysysModal&&"function"==typeof window.AnalysysModal&&window.AnalysysModal([{xwhat:"$identify",xwho:e}]))}else{var r=backParamsArray(e,i);transporter("identify",r.argArray,r.callback)}}function profileSet(e,t,i){baseConfig.status.FnName="$profile_set",resetCode(),"Object"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)?(i=t,t=""):"String"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)&&(t=t.call(t));var r=Util$1.toObj(e,t);for(var a in r)"Function"===Util$1.paramType(r[a])&&(r[a]=r[a].call(r[a]));if(!0!==baseConfig.base.isHybrid){checkPrivate(r,"$profile_set");var n=temp$1("$profile_set"),o=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(o,{xcontext:r}),i)}else{var s=backParamsArray(e,t,i);transporter("profileSet",s.argArray,s.callback)}}function profileSetOnce(e,t,i){baseConfig.status.FnName="$profile_set_once",resetCode(),"Object"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)?(i=t,t=""):"String"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)&&(t=t.call(t));var r=Util$1.toObj(e,t);for(var a in r)"Function"===Util$1.paramType(r[a])&&(r[a]=r[a].call(r[a]));if(!0!==baseConfig.base.isHybrid){checkPrivate(r,"$profile_set_once");var n=temp$1("$profile_set_once"),o=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(o,{xcontext:r}),i)}else{var s=backParamsArray(r,i);transporter("profileSetOnce",s.argArray,s.callback)}}function profileIncrement(e,t,i){baseConfig.status.FnName="$profile_increment",resetCode(),"Object"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)?(i=t,t=""):"String"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)&&(t=t.call(t));var r=Util$1.toObj(e,t);for(var a in r)"Function"===Util$1.paramType(r[a])&&(r[a]=r[a].call(r[a]));if(!0!==baseConfig.base.isHybrid){checkPrivate(r,"$profile_increment");var n=temp$1("$profile_increment"),o=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(o,{xcontext:r}),i)}else{var s=backParamsArray(e,t,i);transporter("profileIncrement",s.argArray,s.callback)}}function profileAppend(e,t,i){baseConfig.status.FnName="$profile_append",resetCode(),"Object"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)?(i=t,t=""):"String"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)&&(t=t.call(t));var r=Util$1.toObj(e,t);for(var a in r)"Function"===Util$1.paramType(r[a])&&(r[a]=r[a].call(r[a]));if(!0!==baseConfig.base.isHybrid){checkPrivate(r,"$profile_append");var n=temp$1("$profile_append"),o=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(o,{xcontext:r}),i)}else{var s=backParamsArray(e,t,i);transporter("profileAppend",s.argArray,s.callback)}}function profileUnset(e,t){baseConfig.status.FnName="$profile_unset",resetCode(),"Function"===Util$1.paramType(e)&&(e=e.call(e)),checkPrivate(e,"$profile_unset",e);var i=Util$1.toObj(e,"");if(!0!==baseConfig.base.isHybrid){checkPrivate(i,"$profile_unset");var r=fillField(temp$1("$profile_unset"));upLog(Util$1.objMerge(r,{xcontext:i}),t)}else{var a=backParamsArray(e,t);transporter("profileUnset",a.argArray,a.callback)}}function profileDelete(e){(baseConfig.status.FnName="$profile_delete",resetCode(),!0!==baseConfig.base.isHybrid)?upLog(fillField(temp$1("$profile_delete")),e):transporter("profileDelete",[],e)}function registerSuperProperty(e,t,i){baseConfig.status.FnName="$registerSuperProperty",resetCode(),"Object"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)?(i=t,t=""):"String"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)&&(t=t.call(t));var r=Util$1.toObj(e,t);for(var a in r)"Function"===Util$1.paramType(r[a])&&(r[a]=r[a].call(r[a]));if(!0!==baseConfig.base.isHybrid){checkPrivate(r,"$registerSuperProperty");var n=Storage$1.getLocal("ARKSUPER")||{},o=Util$1.objMerge(n,r);Storage$1.setLocal("ARKSUPER",o),baseConfig.status.successCode="20002",baseConfig.status.value=JSON.stringify(r),successLog(),"Function"===Util$1.paramType(i)&&i.call(i)}else{var s=backParamsArray(e,t,i);transporter("registerSuperProperty",s.argArray,s.callback)}}function registerSuperProperties(e,t,i){baseConfig.status.FnName="$registerSuperProperties",resetCode(),"Object"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)?(i=t,t=""):"String"===Util$1.paramType(e)&&"Function"===Util$1.paramType(t)&&(t=t.call(t));var r=Util$1.toObj(e,t);for(var a in r)"Function"===Util$1.paramType(r[a])&&(r[a]=r[a].call(r[a]));if(!0!==baseConfig.base.isHybrid){checkPrivate(r,"$registerSuperProperties");var n=Storage$1.getLocal("ARKSUPER")||{},o=Util$1.objMerge(n,r);Storage$1.setLocal("ARKSUPER",o),baseConfig.status.successCode="20002",baseConfig.status.value=JSON.stringify(r),successLog(),"Function"===Util$1.paramType(i)&&i.call(i)}else{var s=backParamsArray(e,t,i);transporter("registerSuperProperties",s.argArray,s.callback)}}function getSuperProperty(e,t){if(baseConfig.status.FnName="$getSuperProperty",resetCode(),!0===baseConfig.base.isHybrid){var i=backParamsArray(e),r="AnsCallback"+ +new Date;return window[r]=function(){t.apply(t,arguments),delete window[r]},void transporter("getSuperProperty",i.argArray,r)}checkPrivate(e,"$getSuperProperty",!0);var a=Storage$1.getLocal("ARKSUPER")||{},n=a[e];return!{}.hasOwnProperty.call(a,e)?(baseConfig.status.successCode="20009",n=""):(baseConfig.status.successCode="20010",baseConfig.status.value=n),baseConfig.status.key=e,successLog(),"Function"===Util$1.paramType(t)&&t.call(t,n),n}function getSuperProperties(e){if(baseConfig.status.FnName="$getSuperProperties",resetCode(),!0===baseConfig.base.isHybrid){var t="AnsCallback"+ +new Date;return window[t]=function(){e.apply(e,arguments),delete window[t]},void transporter("getSuperProperties",[],t)}var i=Storage$1.getLocal("ARKSUPER")||{};return baseConfig.status.successCode="20010",baseConfig.status.value=JSON.stringify(i),successLog(),"Function"===Util$1.paramType(e)&&e.call(e,i),i}function unRegisterSuperProperty(e,t){if(baseConfig.status.FnName="$unregisterSuperProperty",resetCode(),!0!==baseConfig.base.isHybrid){checkPrivate(e,"$unregisterSuperProperty",!0);var i=Storage$1.getLocal("ARKSUPER")||{};Object.prototype.hasOwnProperty.call(i,e)?(delete i[e],Storage$1.setLocal("ARKSUPER",i),baseConfig.status.successCode="20003"):baseConfig.status.successCode="20011",baseConfig.status.value=e,successLog(),"Function"===Util$1.paramType(t)&&t.call(t)}else{var r=backParamsArray.apply(e,arguments),a=r.argArray;transporter("unRegisterSuperProperty",a,r.callback)}}function clearSuperProperties(e){if(baseConfig.status.FnName="$clearSuperProperties",resetCode(),!0!==baseConfig.base.isHybrid)Storage$1.setLocal("ARKSUPER",{}),baseConfig.status.successCode="20004",successLog(),"Function"===Util$1.paramType(e)&&e.call(e);else{var t=backParamsArray(e);transporter("clearSuperProperties",t.argArray,t.callback)}}function reset(e){if(!0!==baseConfig.base.isHybrid){if(resetCode(),removeUUId(),clearSuperProperties(),clearCache(!0),sessionId.setId(),!0===baseConfig.base.autoProfile)profileSetOnce({$reset_time:Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS")},e);else"Function"===Util$1.paramType(e)&&e.call(e);baseConfig.status.FnName="$reset",baseConfig.status.successCode="20005",successLog()}else transporter("reset",[],e)}function getDistinctId(e){if(!0===baseConfig.base.isHybrid){var t="AnsCallback"+ +new Date;return window[t]=function(){e.apply(e,arguments),delete window[t]},void transporter("getDistinctId",[],t)}var i=getIdentifyId()||getUUId();return"Function"===Util$1.paramType(e)&&e.call(e,i),i}var ans=Object.freeze({__proto__:null,pageView:pageView,profileSet:profileSet,profileSetOnce:profileSetOnce,profileIncrement:profileIncrement,profileAppend:profileAppend,profileUnset:profileUnset,profileDelete:profileDelete,alias:alias,identify:identify,track:track,registerSuperProperty:registerSuperProperty,registerSuperProperties:registerSuperProperties,getSuperProperty:getSuperProperty,getSuperProperties:getSuperProperties,unRegisterSuperProperty:unRegisterSuperProperty,clearSuperProperties:clearSuperProperties,reset:reset,freeApi:freeApi,getDistinctId:getDistinctId,getPresetProperties:getPresetProperties});function startUp(){var e=[];if(!1!==baseConfig.base.isHybrid||checkBase()){var t=Storage$1.getLocal("ARKSUPER")||{};if(!1===baseConfig.base.isHybrid&&!1===isStartUp()){var i=!0;if((Util$1.checkTypeList(baseConfig.base.startUpBlackList)||baseConfig.base.startUpWhiteList&&!Util$1.checkTypeList(baseConfig.base.startUpWhiteList))&&(i=!1),!0===i){baseConfig.status.FnName="$startup";var r=fillField(temp$1("$startup"));r=Util$1.objMerge(r,{xcontext:t}),e.push(Util$1.delEmpty(r))}}var a=Storage$1.getLocal("ARKFRISTPROFILE")||!1;if(!1===baseConfig.base.isHybrid&&!0===baseConfig.base.autoProfile&&!a){baseConfig.status.FnName="$profile_set_once";var n=fillField(temp$1("$profile_set_once")),o=Storage$1.getLocal("ARKFRISTPROFILE")||Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS"),s={$first_visit_time:o,$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},l=Util$1.objMerge(n,{xcontext:s});e.push(Util$1.delEmpty(l)),Storage$1.setLocal("ARKFRISTPROFILE",o)}if(!0===baseConfig.base.auto){var c=pageViewLog(baseConfig.base.pageProperty);e.push(c),!0!==baseConfig.base.hash&&!0!==baseConfig.base.singlePage||hashPageView()}e.length>0&&upLog(e)}else errorLog()}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var JSON2=createCommonjsModule((function(module,exports){!function(JSON){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var i,r,a,n,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(n=l.length,i=0;i<n;i+=1)o[i]=str(i,l)||"null";return a=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(n=rep.length,i=0;i<n;i+=1)"string"==typeof rep[i]&&(a=str(r=rep[i],l))&&o.push(quote(r)+(gap?": ":":")+a);else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(a=str(r,l))&&o.push(quote(r)+(gap?": ":":")+a);return a=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,a}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;r<i;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,r,a=e[t];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(void 0!==(r=walk(a,i))?a[i]=r:delete a[i]);return reviver.call(e,t,a)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(exports)}));function ieCreat(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1})}window.AnalysysAgent=window.AnalysysAgent||{};var AnalysysAgent=window.AnalysysAgent,config=AnalysysAgent.config||{},param=AnalysysAgent.param||[];function isHybrid(){window.navigator.userAgent.indexOf("AnalysysAgent/Hybrid")>-1&&(baseConfig.base.isHybrid=!0),window.AnalysysAgentHybrid&&!0===window.AnalysysAgentHybrid.isHybrid()&&(baseConfig.base.isHybrid=!0)}function _createAnsSDK(){if(isHybrid(),AnalysysAgent.isInit=!0,!0===baseConfig.base.isHybrid)for(var e in HybridAns)AnalysysAgent[e]=HybridAns[e];for(var t in ans)AnalysysAgent[t]=ans[t];for(var i in config)"Function"===Util$1.paramType(getField[i])?getField[i](config[i]):baseConfig.base[i]=config[i];AnalysysAgent.config=Util$1.objMerge(baseConfig.base,config),baseConfig.base=AnalysysAgent.config,clearCache();for(var r=0;r<param.length;r++){var a=param[r];Util$1.objHasKay(ans,a[0])&&("identify"===a[0]||"alias"===a[0]||a[0].indexOf("Super")>-1)&&ans[a[0]].apply(ans[a[0]],a[1])}lifecycle$5.AnalysysAgent&&lifecycle$5.AnalysysAgent.init&&lifecycle$5.AnalysysAgent.init(baseConfig.base),startUp();for(var n=0;n<param.length;n++){var o=param[n];Util$1.objHasKay(ans,o[0])&&"identify"!==o[0]&&"alias"!==o[0]&&o[0].indexOf("Super")<0&&ans[o[0]].apply(ans[o[0]],o[1])}}if(ieCreat(),AnalysysAgent.init=function(e){"Object"!==Util$1.paramType(config)||AnalysysAgent.isInit||(config=e,_createAnsSDK())},!AnalysysAgent.isInit){if("Array"===Util$1.paramType(AnalysysAgent))for(var i$3=0;i$3<AnalysysAgent.length;i$3++)if("Function"===Util$1.paramType(ans[AnalysysAgent[i$3][0]])){var fnName=AnalysysAgent[i$3][0];AnalysysAgent[i$3].splice(0,1),param.push([fnName,AnalysysAgent[i$3]])}else config[AnalysysAgent[i$3][0]]=AnalysysAgent[i$3][1];!1!==Util$1.isEmptyObject(config)&&!0!==baseConfig.base.isHybrid||_createAnsSDK()}export default AnalysysAgent;
